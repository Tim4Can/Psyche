(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08f2e77d"],{6871:function(t,e,a){},"6f36":function(t,e,a){"use strict";a.d(e,"e",function(){return r}),a.d(e,"c",function(){return s}),a.d(e,"b",function(){return o}),a.d(e,"a",function(){return c}),a.d(e,"d",function(){return l}),a.d(e,"f",function(){return u});var i=a("b775"),n={workSheet:"/sheets/workSheet",checkSheet:"/sheets/checkSheet",repairSheetDetail:"/sheets/repairSheetDetail",workSheetRow:"/sheets/workSheetRow",checkSheetRow:"/sheets/checkSheetRow",scheduleDetail:"/sheets/scheduleDetail"};function r(){return Object(i["b"])({url:n.workSheet,method:"get"})}function s(){return Object(i["b"])({url:n.checkSheet,method:"get"})}function o(t){return Object(i["b"])({url:n.workSheetRow,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(t){return Object(i["b"])({url:n.checkSheetRow,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(){return Object(i["b"])({url:n.repairSheetDetail,method:"get"})}function u(t){return Object(i["b"])({url:n.scheduleDetail,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},b385:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-view",{attrs:{title:"工单管理"}},[a("div",[a("div",[a("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:t.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"查找工单"}},[a("a-input",{attrs:{placeholder:"请输入工单单号"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:8,sm:24,lg:10}},[a("a-form-item",{attrs:{label:"根据编号查找维修员"}},[a("a-input",{attrs:{placeholder:"请输入维修员编号"},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}})],1)],1),a("a-col",{attrs:{md:8,sm:24,lg:10}},[a("a-form-item",{attrs:{label:"根据姓名查找维修员"}},[a("a-input",{attrs:{placeholder:"请输入维修员姓名"},model:{value:t.input3,callback:function(e){t.input3=e},expression:"input3"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:8,sm:24,lg:10}},[a("a-form-item",{attrs:{label:"根据编号查找调度员"}},[a("a-input",{attrs:{placeholder:"请输入调度员编号"},model:{value:t.input4,callback:function(e){t.input4=e},expression:"input4"}})],1)],1),a("a-col",{attrs:{md:8,sm:24,lg:10}},[a("a-form-item",{attrs:{label:"根据姓名查找调度员"}},[a("a-input",{attrs:{placeholder:"请输入调度员姓名"},model:{value:t.input5,callback:function(e){t.input5=e},expression:"input5"}})],1)],1)],1),a("a-row",[a("a-col",{staticStyle:{textAlign:"'left'","margin-bottom":"24px"},attrs:{span:4}},[a("a-button",{staticClass:"button",attrs:{size:"large",type:"primary"},on:{click:t.onClickRefresh}},[t._v("刷新表单\n            ")]),a("br")],1)],1)],1)],1),a("a-card",[a("a-table",{attrs:{columns:t.columns,dataSource:t.wDataShow,rowKey:"id",bordered:""},scopedSlots:t._u([t._l(["id","equipID","repairerID","repairerName","repairArea","dispatcherID","dispatcherName","statue"],function(e){return{key:e,fn:function(i){return[a("div",{key:e},[t._v("\n            "+t._s(i)+"\n          ")])]}}}),{key:"statue",fn:function(e){return[a("a-badge",{attrs:{status:t._f("statusTypeFilter")(e),text:t._f("statusFilter")(e)}})]}},{key:"work_picture",fn:function(e){return[a("div",{attrs:{id:"app"}},[a("div",{},[a("div",{staticClass:"pic",on:{click:function(){return t.showImg(e)}}},[a("a-avatar",{attrs:{src:e}})],1)]),a("vue-easy-lightbox",{attrs:{visible:t.visible,imgs:t.src},on:{hide:t.handleHide}})],1)]}},{key:"operation",fn:function(e,i){return[a("a-button",{attrs:{size:"small",type:"danger",hidden:e},on:{click:function(e){return t.onClickDelete(i.id)}}},[t._v("删除\n          ")]),a("a-modal",{attrs:{title:"确认删除"},on:{ok:t.onClickDeleteRow},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[a("div",{staticClass:"modal"},[t._v("\n              是否删除本条记录\n            ")])])]}}],null,!0)})],1)],1)])},n=[],r=a("75fc"),s=(a("386d"),a("cebc")),o=a("ffe7"),c=a.n(o),l=a("2b0e"),u=a("da65"),d=a.n(u),h=a("680a"),p=a("6f36");l["a"].use(d.a);var f={0:{status:"processing",text:"进行"},1:{status:"success",text:"完成"}},w=[{title:"工单单号",dataIndex:"id",align:"center",scopedSlots:{customRender:"id"},sorter:function(t,e){return t.id>e.id}},{title:"被维修器件编号",dataIndex:"equipID",align:"center",scopedSlots:{customRender:"equipID"},sorter:function(t,e){return t.equipID>e.equipID}},{title:"指定维修员编号",dataIndex:"repairerID",align:"center",scopedSlots:{customRender:"repairerID"},sorter:function(t,e){return t.repairerID>e.repairerID}},{title:"维修员姓名",dataIndex:"repairerName",align:"center",scopedSlots:{customRender:"repairerName"}},{title:"维修区域",dataIndex:"repairArea",align:"center",scopedSlots:{customRender:"repairArea"}},{title:"调度员编号",dataIndex:"dispatcherID",align:"center",scopedSlots:{customRender:"dispatcherID"},sorter:function(t,e){return t.dispatcherID>e.dispatcherID}},{title:"调度员姓名",dataIndex:"dispatcherName",align:"center",scopedSlots:{customRender:"dispatcherName"}},{title:"工单状态",dataIndex:"statue",align:"center",filters:[{text:"进行",value:"0"},{text:"完成",value:"1"}],onFilter:function(t,e){return 0===e.statue.indexOf(t)},scopedSlots:{customRender:"statue"}},{title:"维修结果图片",align:"center",dataIndex:"work_picture",scopedSlots:{customRender:"work_picture"}},{titile:"操作",align:"center",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],m=[],b=[],D={name:"workSheet",inject:["reload"],components:{PageView:h["c"]},data:function(){return this.cacheData=m.map(function(t){return Object(s["a"])({},t)}),{attributeID:{type:"id",cnType:"工单单号",guide:"请输入单号"},attributeRepairer:{type:"repairerID",cnType:"查询特定维修员的工单",guide:"请输入维修员编号"},input:"",input2:"",input3:"",input4:"",input5:"",wData:m,wDataShow:b,deleteInfo:"",columns:w,isRouterAlive:!0,visible:!1,visible2:!1,src:"",todelete:"",form:this.$form.createForm(this)}},watch:{input:function(t){if(""==t)this.wDataShow=this.wData;else{var e={keys:["id"],threshold:.1},a=new c.a(this.wData,e);this.wDataShow=a.search(t)}},input2:function(t){if(""==t)this.wDataShow=this.wData;else{var e={keys:["repairerID"],threshold:.1},a=new c.a(this.wData,e);this.wDataShow=a.search(t)}},input3:function(t){if(""==t)this.wDataShow=this.wData;else{var e={keys:["repairerName"],threshold:.1},a=new c.a(this.wData,e);this.wDataShow=a.search(t)}},input4:function(t){if(""==t)this.wDataShow=this.wData;else{var e={keys:["dispatcherID"],threshold:.1},a=new c.a(this.wData,e);this.wDataShow=a.search(t)}},input5:function(t){if(""==t)this.wDataShow=this.wData;else{var e={keys:["dispatcherName"],threshold:.1},a=new c.a(this.wData,e);this.wDataShow=a.search(t)}}},filters:{statusFilter:function(t){return f[t].text},statusTypeFilter:function(t){return f[t].status}},methods:{showImg:function(t){this.visible=!0,this.src=t},handleHide:function(){this.visible=!1},onClickDeleteRow:function(){var t=this,e=this.$createElement;this.visible2=!1;var a=Object(r["a"])(this.wDataShow);console.log(a);var i=a.filter(function(e){return t.todelete===e.id})[0];console.log(i),"0"!==i.statue?Object(p["b"])({id:i.id}).then(function(a){t.deleteInfo=a.info,"fail"!==t.deleteInfo&&(t.wData=Object(r["a"])(a.data),t.wDataShow=t.wData),"ok"===t.deleteInfo?t.$notification.open({message:"删除成功",description:"本条工单记录删除成功",icon:e("a-icon",{attrs:{type:"check"},style:"color: #108ee9"})}):t.$notification.open({message:"删除失败",description:"本条工单记录删除失败",icon:e("a-icon",{attrs:{type:"warning"},style:"color: #108ee9"})})}):this.$notification.open({message:"删除失败",description:"未完成的工单不可删除",icon:e("a-icon",{attrs:{type:"warning"},style:"color: #108ee9"})})},onClickRefresh:function(){this.reload()},onClickDelete:function(t){console.log(t),this.todelete=t,this.visible2=!0}},mounted:function(){var t=this;console.log(w[5]),Object(p["e"])().then(function(e){var a;(a=console).log.apply(a,Object(r["a"])(e.data)),t.wData=Object(r["a"])(e.data),t.wDataShow=t.wData})}},v=D,k=(a("fce8"),a("2877")),g=Object(k["a"])(v,i,n,!1,null,"30c39d1a",null);e["default"]=g.exports},fce8:function(t,e,a){"use strict";var i=a("6871"),n=a.n(i);n.a}}]);