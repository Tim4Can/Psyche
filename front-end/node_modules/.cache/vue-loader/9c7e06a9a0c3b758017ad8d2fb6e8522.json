{"remainingRequest":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\warehouse\\WarehousePreview.vue?vue&type=style&index=0&id=3fc50aea&lang=less&scoped=true&","dependencies":[{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\warehouse\\WarehousePreview.vue","mtime":1562869728000},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\css-loader\\index.js","mtime":1573722966629},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1573725517685},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\postcss-loader\\src\\index.js","mtime":1573722998988},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":1573723014394},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1573725517685}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '~ant-design-vue/lib/style/themes/default.less';\n#layout .ant-layout-header {\n  background: #fff;\n  color: #666;\n}\n.button-group {\n  margin-bottom: 1rem;\n  .button {\n    margin-right: 0.5rem;\n    margin-left: 0.5rem;\n  }\n}\n",{"version":3,"sources":["WarehousePreview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WarehousePreview.vue","sourceRoot":"src/views/warehouse","sourcesContent":["<template>\n  <page-view title=\"仓库预览\">\n    <div id=\"layout\">\n      <a-layout>\n        <a-card>\n          <!-- input bar -->\n          <div>\n            <a-form class=\"ant-advanced-search-form\" :form=\"form\">\n              <a-row :gutter=\"24\">\n                <a-col :md=\"8\" :sm=\"24\">\n                  <a-form-item label=\"编号\">\n                    <a-input placeholder=\"请输入查询编号\" v-model=\"input\" />\n                  </a-form-item>\n                </a-col>\n                <a-col :span=\"24\" :style=\"{ textAlign: 'right' }\">\n                  <div class=\"button-group\">\n                    <a-button\n                      size=\"large\"\n                      class=\"button\"\n                      type=\"primary\"\n                      @click=\"onClickRefresh\"\n                      icon=\"reload\"\n                    >刷新</a-button>\n                    <a-button\n                      size=\"large\"\n                      class=\"button\"\n                      type=\"danger\"\n                      @click=\"onClickClearSelect\"\n                      :disabled=\"emptyInput\"\n                      ghost\n                    >重置</a-button>\n                  </div>\n                </a-col>\n              </a-row>\n            </a-form>\n          </div>\n          <!-- input bar end -->\n          <!-- table -->\n          <a-table :columns=\"columns\" :dataSource=\"previewDataShow\" rowKey=\"id\" bordered>\n            <template v-for=\"col in ['id', 'name', 'address']\" slot=\"col\" slot-scope=\"text\">\n              <div :key=\"col\">{{ text }}</div>\n            </template>\n            <template slot=\"operation\" slot-scope=\"text, record\">\n              <div class=\"editable-row-operations\">\n                <router-link :to=\"{ name: 'Detail', params:{ id: getID(record.id)} }\">转到仓库详情页</router-link>\n              </div>\n            </template>\n          </a-table>\n        </a-card>\n        <!-- table end -->\n      </a-layout>\n    </div>\n  </page-view>\n</template>\n\n<script>\nimport { getWarehousePreview, getAllAddress } from '@/api/warehouse'\nimport { PageView } from '@/layouts'\nimport Fuse from 'fuse.js'\n\nexport default {\n  inject: ['reload'],\n  name: 'Preview',\n  components: {\n    PageView\n  },\n  data() {\n    return {\n      // form\n      form: this.$form.createForm(this),\n      columns: [\n        {\n          title: '编号',\n          dataIndex: 'id',\n          align: 'center',\n          width: '15%',\n          scopedSlots: { customRender: 'id' },\n          sorter: (a, b) => a.id > b.id\n        },\n        {\n          title: '名称',\n          dataIndex: 'name',\n          align: 'center',\n          width: '15%',\n          scopedSlots: { customRender: 'name' },\n          sorter: (a, b) => a.id > b.id\n        },\n        {\n          title: '地址',\n          dataIndex: 'address',\n          align: 'center',\n          width: '40%',\n          scopedSlots: { customRender: 'address' },\n          filters: [],\n          onFilter: (value, record) => record.address.indexOf(value) === 0\n        },\n        {\n          title: '操作',\n          align: 'center',\n          dataIndex: 'operation',\n          scopedSlots: { customRender: 'operation' }\n        }\n      ],\n\n      // data\n      input: '',\n      previewData: [],\n      previewDataShow: [],\n      allAddress: []\n    }\n  },\n  // watch for fuzzy search\n  watch: {\n    input(pattern) {\n      if (pattern == '') {\n        this.previewDataShow = this.previewData\n      } else {\n        const option = {\n          keys: ['id'],\n          threshold: 0.1\n        }\n        var fuse = new Fuse(this.previewData, option)\n        this.previewDataShow = fuse.search(pattern)\n      }\n    }\n  },\n  computed: {\n    emptyInput() {\n      if (this.input !== '') {\n        return false\n      } else {\n        return true\n      }\n    }\n  },\n  methods: {\n    // clear all input\n    onClickClearSelect() {\n      this.input = ''\n    },\n    // submit\n    onClickRefresh() {\n      this.onClickClearSelect()\n      this.reload()\n    },\n    getID(id) {\n      const newData = [...this.previewDataShow]\n      const target = newData.filter(item => id === item.id)[0]\n      return target.id\n    }\n  },\n  created() {\n    getWarehousePreview()\n      .then(response => {\n        this.previewData = [...response.data]\n        this.previewDataShow = this.previewData\n      })\n      .catch(err => {\n        this.$notification.open({\n          message: '获取仓库预览信息失败',\n          description: '请查看控制台信息',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />\n        })\n        console.log('')\n      })\n    getAllAddress()\n      .then(response => {\n        this.allAddress = [...response.data]\n        for (let val of this.allAddress) {\n          let temp = {\n            text: val,\n            value: val\n          }\n          this.columns[2].filters.push(temp)\n        }\n      })\n      .catch(err => {\n        this.$notification.open({\n          message: '获取地址列表信息失败',\n          description: '请查看控制台信息',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />\n        })\n        console.log(err)\n      })\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '~ant-design-vue/lib/style/themes/default.less';\n#layout .ant-layout-header {\n  background: #fff;\n  color: #666;\n}\n.button-group {\n  margin-bottom: 1rem;\n  .button {\n    margin-right: 0.5rem;\n    margin-left: 0.5rem;\n  }\n}\n</style>\n"]}]}