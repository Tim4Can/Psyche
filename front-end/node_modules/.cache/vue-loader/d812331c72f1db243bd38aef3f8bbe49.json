{"remainingRequest":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\accessory\\Accessory.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\accessory\\Accessory.vue","mtime":1562869728000},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1573725483614},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1573725517685}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  getAccessoryKind,\n  getAccessoryInWarehouse,\n  getAllType,\n  addAccessoryInWarehouse,\n  getWarehouseName\n} from '@/api/accessory'\nimport Fuse from 'fuse.js'\nimport { PageView } from '@/layouts'\nimport ARow from \"ant-design-vue/es/grid/Row\";\n\n\nexport default {\n  components:{\n    ARow,\n    PageView\n  },\n  data() {\n    return {\n      //form\n      loading: true,\n      input:'',\n      visible: false,\n      confirmLoading: false,\n      ModalText: '',\n      attributeModelID: {\n        type: 'modelID',\n        cnType: '型号编号',\n        guide: '请输入型号编号'\n      },\n      attributeNum: {\n        type: 'num',\n        cnType: '数量',\n        guide: '请输入配件数量'\n      },\n      attributeWarehouse: {\n        type: 'warehouse',\n        cnType: '仓库名称',\n        guide: '请输入仓库名称'\n      },\n      //table columns\n      columns: [\n        {\n          title: '型号编号',\n          dataIndex: 'model',\n          align: 'center',\n        }, {\n          title: '配件类型',\n          dataIndex: 'type',\n          filters: [],\n          align: 'center',\n          onFilter: (value, record) => record.type.indexOf(value) === 0\n        }, {\n          title: '价格',\n          dataIndex: 'price',\n          sorter: (a, b) => a['price'] - b['price']\n        }, {\n          title: '库存数量',\n          dataIndex: 'num',\n          align: 'center',\n          sorter: (a, b) => a['num'] - b['num']\n        }, {\n          title: '所在仓库',\n          dataIndex: 'warehouse',\n          filters: [],\n          align: 'center',\n          onFilter: (value, record) => record.warehouse.indexOf(value) === 0\n        }],\n      //table selection\n\n      //form selection\n\n      //data\n      addData: {\n        accessoryID: '',\n        num: '',\n        warehouse: ''\n      },\n      Data: [],\n      DataShow: [],\n      warehouses: [],\n      types: [],\n      models: [],\n      showAddForm: false,\n\n      form: this.$form.createForm(this),\n\n\n    }\n  },\n  watch: {\n    input(pattern){\n      if( !pattern){\n        console.log(\"pattern\",pattern)\n\n        this.DataShow = this.Data\n      } else {\n        const option = {\n          keys: ['model'],\n          threshold: 0.1\n        }\n        var fuse = new Fuse(this.Data, option)\n        this.DataShow = fuse.search(pattern)\n      }\n    }\n  },\n  computed: {\n    emptyInput() {\n      if (this.addData.accessoryID == '' || this.addData.num == '' || this.addData.warehouse == '')\n        return true\n      else return false\n    }\n  },\n  methods: {\n    //add accessory button\n    addAccessoryButton() {\n      this.showAddForm = true\n    },\n    cancelAddForm() {\n      this.showAddForm = false\n    },\n    //show notification\n    openNotification () {\n      this.$notification.open({\n        message: '提示信息',\n        description: '添加成功！',\n        onClick: () => {\n          console.log('Notification Clicked!');\n        },\n      });\n    },\n    //show modal\n    showModal() {\n      this.visible = true\n    },\n    handleOk(e) {\n      this.showAddForm = false\n      this.confirmLoading = true;\n      setTimeout(() => {\n        this.visible = false;\n        this.confirmLoading = false;\n        this.onClickSubmit();\n        this.openNotification();\n        console.log(\"addData\", this.addData)\n        //   this.onClickClearSelect()\n      }, 10)\n    },\n    handleCancel(e) {\n      console.log('Clicked cancel button');\n      this.visible = false\n    },\n    //  refresh Table\n\n    onClickReload () {\n      this.loading=true\n      getAccessoryInWarehouse().then((response) => {\n        var temp = [...response.data]\n        var result=[]\n        for(let item of temp){\n          var t = {\n            'key': item['key']+item['warehouseID'],\n            'model': item['model'],\n            'type' : item.type,\n            'price': item['price'],\n            'num': item['num'],\n            'warehouse': item['warehouse']\n          }\n          result.push(t)\n        }\n        this.Data = result\n        this.DataShow = this.Data\n        this.input = ''\n        this.loading=false\n      })\n    },\n    onClickClearSelect() {\n      this.addData.accessoryID = ''\n      this.addData.num = ''\n      this.addData.warehouse = ''\n    },\n    onClickSubmit() {\n      addAccessoryInWarehouse(this.addData).then(() => {\n        this.onClickReload();\n        console.log(this.addData)\n      })\n\n    }\n  },\n  created() {\n    //get table\n    getAccessoryKind().then((response) => {\n      console.log('model', response)\n      this.models = [...response.data]\n    })\n   getAccessoryInWarehouse().then((response) => {\n        var temp = [...response.data]\n        var result=[]\n        for(let item of temp){\n          var t = {\n            'key': item['key']+item['warehouseID'],\n            'model': item['model'],\n            'type' : item['type'],\n            'price': item['price'],\n            'num': item['num'],\n            'warehouse': item['warehouse']\n          }\n          result.push(t)\n        }\n        this.Data = result\n        this.DataShow = this.Data\n        this.input = ''\n        this.loading=false\n      })\n    //get all warehouseName\n    getWarehouseName().then((response) => {\n      this.warehouseSelection = [...response.data]\n      for (let val of this.warehouseSelection) {\n        let temp = {\n          'text': val,\n          'value': val\n        }\n        this.columns[4].filters.push(temp)\n        this.warehouses.push(val)\n      }\n      console.log(response)\n    })\n    //get all type\n    getAllType().then((response) => {\n      this.types = [...response.data]\n      for (let val of this.types) {\n        let temp = {\n          text: val,\n          value: val\n        }\n        this.columns[1].filters.push(temp)\n      }\n      console.log(response)\n    })\n\n\n  }\n\n}\n",{"version":3,"sources":["Accessory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA","file":"Accessory.vue","sourceRoot":"src/views/accessory","sourcesContent":["<template>\n  <page-view title=\"配件管理\">\n    <div id=\"layout\">\n      <a-layout>\n        <!-- input bar -->\n        <a-modal v-model=\"showAddForm\" footer>\n          <a-form\n            class=\"ant-advanced-search-form\"\n            :form=\"form\"\n          >\n            <a-form-item :label=\"attributeModelID.cnType\">\n              <!-- 选择型号 -->\n              <a-select\n                showSearch\n                :allowClear=\"true\"\n                placeholder=\"请填写型号\"\n                optionFilterProp=\"children\"\n                v-model=\"addData['accessoryID']\">\n                <a-select-option v-for=\"item in this.models\" :key=\"item.accessory\" :value=\"item.accessory\">\n                  {{item.model}}\n                </a-select-option>\n              </a-select>\n              <!-- 选择型号 -->\n            </a-form-item>\n            <a-form-item :label=\"attributeNum.cnType\">\n              <!-- 选择数量 -->\n              <a-input-number\n                v-model=\"addData[attributeNum.type]\"\n                :defaultValue=\"1\"\n                :min=\"1\"\n                :formatter=\"value => ` ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\"\n                :parser=\"value => value.replace(/\\$\\s?|(,*)/g, '')\"\n              />\n            </a-form-item>\n            <a-form-item :label=\"attributeWarehouse.cnType\">\n              <a-select\n                label=\"attributeWarehouse.cnType\"\n                placeholder=\"请选择仓库\"\n                showSearch\n                :allowClear=\"true\"\n                optionFilterProp=\"children\"\n                v-model=\"addData['warehouse']\">\n                <a-select-option v-for=\"item in warehouses\" :key=\"item\" :value=\"item\">{{item}}</a-select-option>\n              </a-select>\n            </a-form-item>\n            <a-form-item :wrapperCol=\"{ span: 24 }\" style=\"text-align: center\">\n              <div class=\"button-group\">\n                <a-button\n                  size=\"default\"\n                  class=\"button\"\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  @click=\"showModal\"\n                  :disabled=\"emptyInput\"\n                >添加\n                </a-button>\n                <a-modal\n                  title=\"确认信息\"\n                  :visible=\"visible\"\n                  @ok=\"handleOk\"\n                  :confirmLoading=\"confirmLoading\"\n                  @cancel=\"handleCancel\"\n                >\n                  <p>{{`是否将 ${addData.num} 个编码为 ${addData.accessoryID} 的配件添加到 ${addData.warehouse}？`}}</p>\n                </a-modal>\n                <a-button\n                  size=\"default\"\n                  class=\"button\"\n                  type=\"danger\"\n                  @click=\"onClickClearSelect\"\n                  :disabled=\"emptyInput\"\n                >清空\n                </a-button>\n                <a-button style=\"margin-left: 8px\" @click=\"cancelAddForm\"\n                >取消\n                </a-button>\n              </div>\n            </a-form-item>\n          </a-form>\n        </a-modal>\n\n\n        <!-- input bar end -->\n        <!-- refresh button -->\n        <a-row :gutter=\"24\">\n          <a-col :span=\"8\">\n            <a-form-item label=\"编号查询\">\n              <a-input placeholder=\"请输入待查询编号\" v-model=\"input\"/>\n            </a-form-item>\n          </a-col>\n\n          <a-col :span=\"16\" style=\"text-align: right\">\n            <div style=\"margin-top: 2.5rem\">\n              <a-button\n                style=\"margin-right : 1rem\"\n                @click=\"addAccessoryButton()\"\n                type=\"primary\"\n                icon=\"plus\"\n              >添加配件\n              </a-button>\n              <a-button\n                size=\"default\"\n                type=\"primary\"\n                style=\"text-align: right\"\n                @click=\"onClickReload\"\n                icon=\"reload\"\n              >刷新表单\n              </a-button>\n            </div>\n          </a-col>\n\n          <a-col :span=\"8\" style=\"text-align: right\">\n            <div >\n\n            </div>\n          </a-col>\n        </a-row>\n      </a-layout>\n    </div>\n      <!-- input bar end -->\n      <!-- refresh button -->\n      \n  \n      <!-- table -->\n      <a-card>\n        <a-table :columns=\"columns\" :dataSource=\"DataShow\" :loading=\"loading\" />\n      </a-card>\n      <!-- table end -->\n\n\n  </page-view>\n</template>\n\n<script>\n  import {\n    getAccessoryKind,\n    getAccessoryInWarehouse,\n    getAllType,\n    addAccessoryInWarehouse,\n    getWarehouseName\n  } from '@/api/accessory'\n  import Fuse from 'fuse.js'\n  import { PageView } from '@/layouts'\n  import ARow from \"ant-design-vue/es/grid/Row\";\n\n\n  export default {\n    components:{\n      ARow,\n      PageView\n    },\n    data() {\n      return {\n        //form\n        loading: true,\n        input:'',\n        visible: false,\n        confirmLoading: false,\n        ModalText: '',\n        attributeModelID: {\n          type: 'modelID',\n          cnType: '型号编号',\n          guide: '请输入型号编号'\n        },\n        attributeNum: {\n          type: 'num',\n          cnType: '数量',\n          guide: '请输入配件数量'\n        },\n        attributeWarehouse: {\n          type: 'warehouse',\n          cnType: '仓库名称',\n          guide: '请输入仓库名称'\n        },\n        //table columns\n        columns: [\n          {\n            title: '型号编号',\n            dataIndex: 'model',\n            align: 'center',\n          }, {\n            title: '配件类型',\n            dataIndex: 'type',\n            filters: [],\n            align: 'center',\n            onFilter: (value, record) => record.type.indexOf(value) === 0\n          }, {\n            title: '价格',\n            dataIndex: 'price',\n            sorter: (a, b) => a['price'] - b['price']\n          }, {\n            title: '库存数量',\n            dataIndex: 'num',\n            align: 'center',\n            sorter: (a, b) => a['num'] - b['num']\n          }, {\n            title: '所在仓库',\n            dataIndex: 'warehouse',\n            filters: [],\n            align: 'center',\n            onFilter: (value, record) => record.warehouse.indexOf(value) === 0\n          }],\n        //table selection\n\n        //form selection\n\n        //data\n        addData: {\n          accessoryID: '',\n          num: '',\n          warehouse: ''\n        },\n        Data: [],\n        DataShow: [],\n        warehouses: [],\n        types: [],\n        models: [],\n        showAddForm: false,\n\n        form: this.$form.createForm(this),\n\n\n      }\n    },\n    watch: {\n      input(pattern){\n        if( !pattern){\n          console.log(\"pattern\",pattern)\n\n          this.DataShow = this.Data\n        } else {\n          const option = {\n            keys: ['model'],\n            threshold: 0.1\n          }\n          var fuse = new Fuse(this.Data, option)\n          this.DataShow = fuse.search(pattern)\n        }\n      }\n    },\n    computed: {\n      emptyInput() {\n        if (this.addData.accessoryID == '' || this.addData.num == '' || this.addData.warehouse == '')\n          return true\n        else return false\n      }\n    },\n    methods: {\n      //add accessory button\n      addAccessoryButton() {\n        this.showAddForm = true\n      },\n      cancelAddForm() {\n        this.showAddForm = false\n      },\n      //show notification\n      openNotification () {\n        this.$notification.open({\n          message: '提示信息',\n          description: '添加成功！',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          },\n        });\n      },\n      //show modal\n      showModal() {\n        this.visible = true\n      },\n      handleOk(e) {\n        this.showAddForm = false\n        this.confirmLoading = true;\n        setTimeout(() => {\n          this.visible = false;\n          this.confirmLoading = false;\n          this.onClickSubmit();\n          this.openNotification();\n          console.log(\"addData\", this.addData)\n          //   this.onClickClearSelect()\n        }, 10)\n      },\n      handleCancel(e) {\n        console.log('Clicked cancel button');\n        this.visible = false\n      },\n      //  refresh Table\n\n      onClickReload () {\n        this.loading=true\n        getAccessoryInWarehouse().then((response) => {\n          var temp = [...response.data]\n          var result=[]\n          for(let item of temp){\n            var t = {\n              'key': item['key']+item['warehouseID'],\n              'model': item['model'],\n              'type' : item.type,\n              'price': item['price'],\n              'num': item['num'],\n              'warehouse': item['warehouse']\n            }\n            result.push(t)\n          }\n          this.Data = result\n          this.DataShow = this.Data\n          this.input = ''\n          this.loading=false\n        })\n      },\n      onClickClearSelect() {\n        this.addData.accessoryID = ''\n        this.addData.num = ''\n        this.addData.warehouse = ''\n      },\n      onClickSubmit() {\n        addAccessoryInWarehouse(this.addData).then(() => {\n          this.onClickReload();\n          console.log(this.addData)\n        })\n\n      }\n    },\n    created() {\n      //get table\n      getAccessoryKind().then((response) => {\n        console.log('model', response)\n        this.models = [...response.data]\n      })\n     getAccessoryInWarehouse().then((response) => {\n          var temp = [...response.data]\n          var result=[]\n          for(let item of temp){\n            var t = {\n              'key': item['key']+item['warehouseID'],\n              'model': item['model'],\n              'type' : item['type'],\n              'price': item['price'],\n              'num': item['num'],\n              'warehouse': item['warehouse']\n            }\n            result.push(t)\n          }\n          this.Data = result\n          this.DataShow = this.Data\n          this.input = ''\n          this.loading=false\n        })\n      //get all warehouseName\n      getWarehouseName().then((response) => {\n        this.warehouseSelection = [...response.data]\n        for (let val of this.warehouseSelection) {\n          let temp = {\n            'text': val,\n            'value': val\n          }\n          this.columns[4].filters.push(temp)\n          this.warehouses.push(val)\n        }\n        console.log(response)\n      })\n      //get all type\n      getAllType().then((response) => {\n        this.types = [...response.data]\n        for (let val of this.types) {\n          let temp = {\n            text: val,\n            value: val\n          }\n          this.columns[1].filters.push(temp)\n        }\n        console.log(response)\n      })\n\n\n    }\n\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  @import '~ant-design-vue/lib/style/themes/default.less';\n\n  #layout .ant-layout-header {\n    background: #fff;\n    color: #666;\n  }\n\n  .button-group {\n    margin-bottom: 1rem;\n\n    .button {\n      margin-right: 0.5rem;\n      margin-left: 0.5rem;\n      margin-top: 2.7rem;\n    }\n  }\n\n  .button-group2 {\n    margin-top: 3em;\n    margin-bottom: 1rem;\n    margin-left: 39rem\n  }\n</style>"]}]}