{"remainingRequest":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\equipment\\EquipmentUsing.vue?vue&type=style&index=0&id=4c7de0f1&lang=less&scoped=true&","dependencies":[{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\equipment\\EquipmentUsing.vue","mtime":1562869728000},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\css-loader\\index.js","mtime":1573722966629},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1573725517685},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\postcss-loader\\src\\index.js","mtime":1573722998988},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":1573723014394},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1573725517685}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '~ant-design-vue/lib/style/themes/default.less';\n.button-group {\n  margin-bottom: 1rem;\n  .button {\n    margin-left: 0.5rem;\n    margin-left: 0.5rem;\n  }\n}\n.ant-form-inline .ant-form-item {\n  display: inline-block;\n  margin-right: 0;\n}\n.ant-form-item-control-wrapper {\n  width: 100px;\n}\n.table-page-search-wrapper .ant-form-inline .ant-form-item .ant-form-item-control-wrapper {\n  width: 100%;\n}\n",{"version":3,"sources":["EquipmentUsing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EquipmentUsing.vue","sourceRoot":"src/views/equipment","sourcesContent":["<template>\n  <page-view title=\"在用器材\">\n    <div>\n      <a-card :bordered=\"false\">\n        <br />\n        <a-form class=\"ant-advanced-search-form\" :form=\"form\" inline>\n          <a-row :gutter=\"24\">\n            <a-col :span=\"6\">\n              <a-form-item>\n                <label>器材编号：</label>\n                <a-input placeholder=\"请输入器材编号\" v-model=\"inputID\" />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"6\">\n              <a-form-item>\n                <label>型号：</label>\n                <a-input placeholder=\"请输入型号\" v-model=\"inputmodel\" />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"6\">\n              <a-form-item>\n                <label>地址：</label>\n                <a-input placeholder=\"请输入地址\" v-model=\"inputAddress\" />\n              </a-form-item>\n            </a-col>\n            <a-col :span=\"6\">\n              <a-form-item>\n                <div style=\"text-align: right; margin-top: 2rem\">\n                  <a-button @click=\"reload()\" size=\"large\" type=\"primary\" icon=\"reload\">刷新</a-button>\n                </div>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-form>\n        <br />\n        <div>\n          <a-table :columns=\"columns\" :dataSource=\"eDataShow\" rowKey=\"id\" bordered>\n            <template\n              v-for=\"col in ['id', 'type', 'damage', 'address', 'status']\"\n              :slot=\"col\"\n              slot-scope=\"text\"\n            >\n              <div :key=\"col\">{{ text }}</div>\n            </template>\n            <template slot=\"id\" slot-scope=\"text\">{{ text }}</template>\n            <template slot=\"status\" slot-scope=\"text\">\n              <a-badge :status=\"text | statusTypeFilter\" :text=\"text | statusFilter\" />\n            </template>\n            <template slot=\"toDetail\" slot-scope=\"text, record\">\n              <div>\n                <router-link :to=\"{ name: 'EquipDetail', params:{ id: getID(record.id)} }\">器材详情</router-link>\n              </div>\n            </template>\n          </a-table>\n        </div>\n      </a-card>\n    </div>\n  </page-view>\n</template>\n\n<script>\nimport { getEquipmentUsingList } from '@/api/equipment'\nimport { PageView } from '@/layouts'\nimport Fuse from 'fuse.js'\nconst statusMap = {\n  0: {\n    status: 'success',\n    text: '正常'\n  },\n  1: {\n    status: 'error',\n    text: '损坏'\n  }\n}\nconst columns = [\n  {\n    title: '器材编号',\n    dataIndex: 'id',\n    width: '15%',\n    align: 'center',\n    scopedSlots: { customRender: 'id' },\n    sorter: (a, b) => parseInt(a.id.toString().slice(2)) - parseInt(b.id.toString().slice(2))\n  },\n  {\n    title: '类别',\n    dataIndex: 'type',\n    align: 'center',\n    width: '10%',\n    scopedSlots: { customRender: 'type' }\n  },\n  {\n    title: '使用状态',\n    dataIndex: 'status',\n    align: 'center',\n    width: '10%',\n    filters: [\n      {\n        text: '正常',\n        value: '0'\n      },\n      {\n        text: '损坏',\n        value: '1'\n      }\n    ],\n    onFilter: (value, record) => record.status.indexOf(value) === 0,\n    scopedSlots: { customRender: 'status' }\n  },\n  {\n    title: '型号',\n    dataIndex: 'model',\n    align: 'center',\n    width: '12%',\n    scopedSlots: { customRender: 'model' }\n  },\n  {\n    title: '地址',\n    dataIndex: 'address',\n    align: 'center',\n    width: '30%',\n    scopedSlots: { customRender: 'address' }\n  },\n  {\n    title: ' ',\n    dataIndex: 'toDetail',\n    align: 'center',\n    width: '15%',\n    scopedSlots: { customRender: 'toDetail' }\n  }\n]\nlet inputID = ''\nlet inputAddress = ''\nlet inputmodel = ''\nconst eData = []\nconst eDataShow = []\nexport default {\n  inject: ['reload'],\n  name: 'EquipUsing',\n  components: {\n    PageView\n  },\n  data() {\n    return {\n      attribute: [{ type: 'type', cnType: '类别', guide: '类别筛选' }],\n      equipmentData: {\n        type: ''\n      },\n      eData,\n      eDataShow,\n      inputID: '',\n      inputAddress: '',\n      inputmodel: '',\n      columns,\n      advanced: false,\n      form: this.$form.createForm(this),\n      queryParam: {}\n    }\n  },\n  computed: {\n    emptyInput() {\n      if (\n        this.equipmentData.id !== '' ||\n        this.equipmentData.type !== '' ||\n        this.equipmentData.status !== '' ||\n        this.equipmentData.damage !== ''\n      ) {\n        return false\n      } else {\n        return true\n      }\n    }\n  },\n  filters: {\n    statusFilter(type) {\n      return statusMap[type].text\n    },\n    statusTypeFilter(type) {\n      return statusMap[type].status\n    }\n  },\n  methods: {\n    clickJump(record) {\n      console.log(record)\n    },\n    onClickClearSelect() {\n      this.equipmentData.type = ''\n    },\n    onClickSubmit() {\n      console.log(this.equipmentData)\n      this.onClickClearSelect()\n    },\n    handleChange(value, key, column) {\n      const newData = [...this.eData]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        target[column] = value\n        this.eData = newData\n      }\n    },\n    edit(key) {\n      const newData = [...this.eData]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        target.editable = true\n        this.eData = newData\n      }\n    },\n    save(key) {\n      const newData = [...this.eData]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        delete target.editable\n        this.eData = newData\n        this.cacheData = newData.map(item => ({ ...item }))\n      }\n    },\n    cancel(key) {\n      const newData = [...this.eData]\n      const target = newData.filter(item => key === item.key)[0]\n      if (target) {\n        Object.assign(target, this.cacheData.filter(item => key === item.key)[0])\n        delete target.editable\n        this.eData = newData\n      }\n    },\n    toggleAdvanced() {\n      this.advanced = !this.advanced\n    },\n    resetSearchForm() {\n      this.queryParam = {\n        date: moment(new Date())\n      }\n    },\n    getID(id) {\n      const newData = [...this.eDataShow]\n      const target = newData.filter(item => id === item.id)[0]\n      console.log(target.id)\n      return target.id\n    }\n  },\n  watch: {\n    inputID(pattern) {\n      if (pattern == '') {\n        this.eDataShow = this.eData\n      } else {\n        const option = {\n          keys: ['id'],\n          threshold: 0.1\n        }\n        var fuse = new Fuse(this.eData, option)\n        this.eDataShow = fuse.search(pattern)\n        console.log(this.eDataShow)\n      }\n    },\n    inputAddress(pattern) {\n      if (pattern == '') {\n        this.eDataShow = this.eData\n      } else {\n        const option = {\n          keys: ['address'],\n          threshold: 0.1\n        }\n        var fuse = new Fuse(this.eData, option)\n        this.eDataShow = fuse.search(pattern)\n        console.log(this.eDataShow)\n      }\n    },\n    inputmodel(pattern) {\n      if (pattern == '') {\n        this.eDataShow = this.eData\n      } else {\n        const option = {\n          keys: ['model'],\n          threshold: 0.1\n        }\n        var fuse = new Fuse(this.eData, option)\n        this.eDataShow = fuse.search(pattern)\n        console.log(this.eDataShow)\n      }\n    }\n  },\n  mounted() {\n    getEquipmentUsingList().then(response => {\n      console.log(...response.data)\n      this.eData = [...response.data]\n      this.eDataShow = this.eData\n    })\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '~ant-design-vue/lib/style/themes/default.less';\n.button-group {\n  margin-bottom: 1rem;\n  .button {\n    margin-left: 0.5rem;\n    margin-left: 0.5rem;\n  }\n}\n.ant-form-inline .ant-form-item {\n  display: inline-block;\n  margin-right: 0;\n}\n.ant-form-item-control-wrapper {\n  width: 100px;\n}\n.table-page-search-wrapper .ant-form-inline .ant-form-item .ant-form-item-control-wrapper {\n  width: 100%;\n}\n</style>\n"]}]}