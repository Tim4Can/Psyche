{"remainingRequest":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\accessory\\Accessory.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\accessory\\Accessory.vue","mtime":1562869728000},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1573725483614},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1573725517685}],"contextDependencies":[],"result":["import _getIterator from \"D:\\\\Documents\\\\GitHub\\\\Psyche\\\\front-end\\\\db-front\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/get-iterator\";\nimport _toConsumableArray from \"D:\\\\Documents\\\\GitHub\\\\Psyche\\\\front-end\\\\db-front\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAccessoryKind, getAccessoryInWarehouse, getAllType, addAccessoryInWarehouse, getWarehouseName } from '@/api/accessory';\nimport Fuse from 'fuse.js';\nimport { PageView } from '@/layouts';\nimport ARow from \"ant-design-vue/es/grid/Row\";\nexport default {\n  components: {\n    ARow: ARow,\n    PageView: PageView\n  },\n  data: function data() {\n    return {\n      //form\n      loading: true,\n      input: '',\n      visible: false,\n      confirmLoading: false,\n      ModalText: '',\n      attributeModelID: {\n        type: 'modelID',\n        cnType: '型号编号',\n        guide: '请输入型号编号'\n      },\n      attributeNum: {\n        type: 'num',\n        cnType: '数量',\n        guide: '请输入配件数量'\n      },\n      attributeWarehouse: {\n        type: 'warehouse',\n        cnType: '仓库名称',\n        guide: '请输入仓库名称'\n      },\n      //table columns\n      columns: [{\n        title: '型号编号',\n        dataIndex: 'model',\n        align: 'center'\n      }, {\n        title: '配件类型',\n        dataIndex: 'type',\n        filters: [],\n        align: 'center',\n        onFilter: function onFilter(value, record) {\n          return record.type.indexOf(value) === 0;\n        }\n      }, {\n        title: '价格',\n        dataIndex: 'price',\n        sorter: function sorter(a, b) {\n          return a['price'] - b['price'];\n        }\n      }, {\n        title: '库存数量',\n        dataIndex: 'num',\n        align: 'center',\n        sorter: function sorter(a, b) {\n          return a['num'] - b['num'];\n        }\n      }, {\n        title: '所在仓库',\n        dataIndex: 'warehouse',\n        filters: [],\n        align: 'center',\n        onFilter: function onFilter(value, record) {\n          return record.warehouse.indexOf(value) === 0;\n        }\n      }],\n      //table selection\n      //form selection\n      //data\n      addData: {\n        accessoryID: '',\n        num: '',\n        warehouse: ''\n      },\n      Data: [],\n      DataShow: [],\n      warehouses: [],\n      types: [],\n      models: [],\n      showAddForm: false,\n      form: this.$form.createForm(this)\n    };\n  },\n  watch: {\n    input: function input(pattern) {\n      if (!pattern) {\n        console.log(\"pattern\", pattern);\n        this.DataShow = this.Data;\n      } else {\n        var option = {\n          keys: ['model'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.Data, option);\n        this.DataShow = fuse.search(pattern);\n      }\n    }\n  },\n  computed: {\n    emptyInput: function emptyInput() {\n      if (this.addData.accessoryID == '' || this.addData.num == '' || this.addData.warehouse == '') return true;else return false;\n    }\n  },\n  methods: {\n    //add accessory button\n    addAccessoryButton: function addAccessoryButton() {\n      this.showAddForm = true;\n    },\n    cancelAddForm: function cancelAddForm() {\n      this.showAddForm = false;\n    },\n    //show notification\n    openNotification: function openNotification() {\n      this.$notification.open({\n        message: '提示信息',\n        description: '添加成功！',\n        onClick: function onClick() {\n          console.log('Notification Clicked!');\n        }\n      });\n    },\n    //show modal\n    showModal: function showModal() {\n      this.visible = true;\n    },\n    handleOk: function handleOk(e) {\n      var _this = this;\n\n      this.showAddForm = false;\n      this.confirmLoading = true;\n      setTimeout(function () {\n        _this.visible = false;\n        _this.confirmLoading = false;\n\n        _this.onClickSubmit();\n\n        _this.openNotification();\n\n        console.log(\"addData\", _this.addData); //   this.onClickClearSelect()\n      }, 10);\n    },\n    handleCancel: function handleCancel(e) {\n      console.log('Clicked cancel button');\n      this.visible = false;\n    },\n    //  refresh Table\n    onClickReload: function onClickReload() {\n      var _this2 = this;\n\n      this.loading = true;\n      getAccessoryInWarehouse().then(function (response) {\n        var temp = _toConsumableArray(response.data);\n\n        var result = [];\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _getIterator(temp), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n            var t = {\n              'key': item['key'] + item['warehouseID'],\n              'model': item['model'],\n              'type': item.type,\n              'price': item['price'],\n              'num': item['num'],\n              'warehouse': item['warehouse']\n            };\n            result.push(t);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        _this2.Data = result;\n        _this2.DataShow = _this2.Data;\n        _this2.input = '';\n        _this2.loading = false;\n      });\n    },\n    onClickClearSelect: function onClickClearSelect() {\n      this.addData.accessoryID = '';\n      this.addData.num = '';\n      this.addData.warehouse = '';\n    },\n    onClickSubmit: function onClickSubmit() {\n      var _this3 = this;\n\n      addAccessoryInWarehouse(this.addData).then(function () {\n        _this3.onClickReload();\n\n        console.log(_this3.addData);\n      });\n    }\n  },\n  created: function created() {\n    var _this4 = this;\n\n    //get table\n    getAccessoryKind().then(function (response) {\n      console.log('model', response);\n      _this4.models = _toConsumableArray(response.data);\n    });\n    getAccessoryInWarehouse().then(function (response) {\n      var temp = _toConsumableArray(response.data);\n\n      var result = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = _getIterator(temp), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n          var t = {\n            'key': item['key'] + item['warehouseID'],\n            'model': item['model'],\n            'type': item['type'],\n            'price': item['price'],\n            'num': item['num'],\n            'warehouse': item['warehouse']\n          };\n          result.push(t);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      _this4.Data = result;\n      _this4.DataShow = _this4.Data;\n      _this4.input = '';\n      _this4.loading = false;\n    }); //get all warehouseName\n\n    getWarehouseName().then(function (response) {\n      _this4.warehouseSelection = _toConsumableArray(response.data);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = _getIterator(_this4.warehouseSelection), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var val = _step3.value;\n          var temp = {\n            'text': val,\n            'value': val\n          };\n\n          _this4.columns[4].filters.push(temp);\n\n          _this4.warehouses.push(val);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      console.log(response);\n    }); //get all type\n\n    getAllType().then(function (response) {\n      _this4.types = _toConsumableArray(response.data);\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = _getIterator(_this4.types), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var val = _step4.value;\n          var temp = {\n            text: val,\n            value: val\n          };\n\n          _this4.columns[1].filters.push(temp);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      console.log(response);\n    });\n  }\n};",{"version":3,"sources":["Accessory.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <page-view title=\"配件管理\">\n    <div id=\"layout\">\n      <a-layout>\n        <!-- input bar -->\n        <a-modal v-model=\"showAddForm\" footer>\n          <a-form\n            class=\"ant-advanced-search-form\"\n            :form=\"form\"\n          >\n            <a-form-item :label=\"attributeModelID.cnType\">\n              <!-- 选择型号 -->\n              <a-select\n                showSearch\n                :allowClear=\"true\"\n                placeholder=\"请填写型号\"\n                optionFilterProp=\"children\"\n                v-model=\"addData['accessoryID']\">\n                <a-select-option v-for=\"item in this.models\" :key=\"item.accessory\" :value=\"item.accessory\">\n                  {{item.model}}\n                </a-select-option>\n              </a-select>\n              <!-- 选择型号 -->\n            </a-form-item>\n            <a-form-item :label=\"attributeNum.cnType\">\n              <!-- 选择数量 -->\n              <a-input-number\n                v-model=\"addData[attributeNum.type]\"\n                :defaultValue=\"1\"\n                :min=\"1\"\n                :formatter=\"value => ` ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\"\n                :parser=\"value => value.replace(/\\$\\s?|(,*)/g, '')\"\n              />\n            </a-form-item>\n            <a-form-item :label=\"attributeWarehouse.cnType\">\n              <a-select\n                label=\"attributeWarehouse.cnType\"\n                placeholder=\"请选择仓库\"\n                showSearch\n                :allowClear=\"true\"\n                optionFilterProp=\"children\"\n                v-model=\"addData['warehouse']\">\n                <a-select-option v-for=\"item in warehouses\" :key=\"item\" :value=\"item\">{{item}}</a-select-option>\n              </a-select>\n            </a-form-item>\n            <a-form-item :wrapperCol=\"{ span: 24 }\" style=\"text-align: center\">\n              <div class=\"button-group\">\n                <a-button\n                  size=\"default\"\n                  class=\"button\"\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  @click=\"showModal\"\n                  :disabled=\"emptyInput\"\n                >添加\n                </a-button>\n                <a-modal\n                  title=\"确认信息\"\n                  :visible=\"visible\"\n                  @ok=\"handleOk\"\n                  :confirmLoading=\"confirmLoading\"\n                  @cancel=\"handleCancel\"\n                >\n                  <p>{{`是否将 ${addData.num} 个编码为 ${addData.accessoryID} 的配件添加到 ${addData.warehouse}？`}}</p>\n                </a-modal>\n                <a-button\n                  size=\"default\"\n                  class=\"button\"\n                  type=\"danger\"\n                  @click=\"onClickClearSelect\"\n                  :disabled=\"emptyInput\"\n                >清空\n                </a-button>\n                <a-button style=\"margin-left: 8px\" @click=\"cancelAddForm\"\n                >取消\n                </a-button>\n              </div>\n            </a-form-item>\n          </a-form>\n        </a-modal>\n\n\n        <!-- input bar end -->\n        <!-- refresh button -->\n        <a-row :gutter=\"24\">\n          <a-col :span=\"8\">\n            <a-form-item label=\"编号查询\">\n              <a-input placeholder=\"请输入待查询编号\" v-model=\"input\"/>\n            </a-form-item>\n          </a-col>\n\n          <a-col :span=\"16\" style=\"text-align: right\">\n            <div style=\"margin-top: 2.5rem\">\n              <a-button\n                style=\"margin-right : 1rem\"\n                @click=\"addAccessoryButton()\"\n                type=\"primary\"\n                icon=\"plus\"\n              >添加配件\n              </a-button>\n              <a-button\n                size=\"default\"\n                type=\"primary\"\n                style=\"text-align: right\"\n                @click=\"onClickReload\"\n                icon=\"reload\"\n              >刷新表单\n              </a-button>\n            </div>\n          </a-col>\n\n          <a-col :span=\"8\" style=\"text-align: right\">\n            <div >\n\n            </div>\n          </a-col>\n        </a-row>\n      </a-layout>\n    </div>\n      <!-- input bar end -->\n      <!-- refresh button -->\n      \n  \n      <!-- table -->\n      <a-card>\n        <a-table :columns=\"columns\" :dataSource=\"DataShow\" :loading=\"loading\" />\n      </a-card>\n      <!-- table end -->\n\n\n  </page-view>\n</template>\n\n<script>\n  import {\n    getAccessoryKind,\n    getAccessoryInWarehouse,\n    getAllType,\n    addAccessoryInWarehouse,\n    getWarehouseName\n  } from '@/api/accessory'\n  import Fuse from 'fuse.js'\n  import { PageView } from '@/layouts'\n  import ARow from \"ant-design-vue/es/grid/Row\";\n\n\n  export default {\n    components:{\n      ARow,\n      PageView\n    },\n    data() {\n      return {\n        //form\n        loading: true,\n        input:'',\n        visible: false,\n        confirmLoading: false,\n        ModalText: '',\n        attributeModelID: {\n          type: 'modelID',\n          cnType: '型号编号',\n          guide: '请输入型号编号'\n        },\n        attributeNum: {\n          type: 'num',\n          cnType: '数量',\n          guide: '请输入配件数量'\n        },\n        attributeWarehouse: {\n          type: 'warehouse',\n          cnType: '仓库名称',\n          guide: '请输入仓库名称'\n        },\n        //table columns\n        columns: [\n          {\n            title: '型号编号',\n            dataIndex: 'model',\n            align: 'center',\n          }, {\n            title: '配件类型',\n            dataIndex: 'type',\n            filters: [],\n            align: 'center',\n            onFilter: (value, record) => record.type.indexOf(value) === 0\n          }, {\n            title: '价格',\n            dataIndex: 'price',\n            sorter: (a, b) => a['price'] - b['price']\n          }, {\n            title: '库存数量',\n            dataIndex: 'num',\n            align: 'center',\n            sorter: (a, b) => a['num'] - b['num']\n          }, {\n            title: '所在仓库',\n            dataIndex: 'warehouse',\n            filters: [],\n            align: 'center',\n            onFilter: (value, record) => record.warehouse.indexOf(value) === 0\n          }],\n        //table selection\n\n        //form selection\n\n        //data\n        addData: {\n          accessoryID: '',\n          num: '',\n          warehouse: ''\n        },\n        Data: [],\n        DataShow: [],\n        warehouses: [],\n        types: [],\n        models: [],\n        showAddForm: false,\n\n        form: this.$form.createForm(this),\n\n\n      }\n    },\n    watch: {\n      input(pattern){\n        if( !pattern){\n          console.log(\"pattern\",pattern)\n\n          this.DataShow = this.Data\n        } else {\n          const option = {\n            keys: ['model'],\n            threshold: 0.1\n          }\n          var fuse = new Fuse(this.Data, option)\n          this.DataShow = fuse.search(pattern)\n        }\n      }\n    },\n    computed: {\n      emptyInput() {\n        if (this.addData.accessoryID == '' || this.addData.num == '' || this.addData.warehouse == '')\n          return true\n        else return false\n      }\n    },\n    methods: {\n      //add accessory button\n      addAccessoryButton() {\n        this.showAddForm = true\n      },\n      cancelAddForm() {\n        this.showAddForm = false\n      },\n      //show notification\n      openNotification () {\n        this.$notification.open({\n          message: '提示信息',\n          description: '添加成功！',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          },\n        });\n      },\n      //show modal\n      showModal() {\n        this.visible = true\n      },\n      handleOk(e) {\n        this.showAddForm = false\n        this.confirmLoading = true;\n        setTimeout(() => {\n          this.visible = false;\n          this.confirmLoading = false;\n          this.onClickSubmit();\n          this.openNotification();\n          console.log(\"addData\", this.addData)\n          //   this.onClickClearSelect()\n        }, 10)\n      },\n      handleCancel(e) {\n        console.log('Clicked cancel button');\n        this.visible = false\n      },\n      //  refresh Table\n\n      onClickReload () {\n        this.loading=true\n        getAccessoryInWarehouse().then((response) => {\n          var temp = [...response.data]\n          var result=[]\n          for(let item of temp){\n            var t = {\n              'key': item['key']+item['warehouseID'],\n              'model': item['model'],\n              'type' : item.type,\n              'price': item['price'],\n              'num': item['num'],\n              'warehouse': item['warehouse']\n            }\n            result.push(t)\n          }\n          this.Data = result\n          this.DataShow = this.Data\n          this.input = ''\n          this.loading=false\n        })\n      },\n      onClickClearSelect() {\n        this.addData.accessoryID = ''\n        this.addData.num = ''\n        this.addData.warehouse = ''\n      },\n      onClickSubmit() {\n        addAccessoryInWarehouse(this.addData).then(() => {\n          this.onClickReload();\n          console.log(this.addData)\n        })\n\n      }\n    },\n    created() {\n      //get table\n      getAccessoryKind().then((response) => {\n        console.log('model', response)\n        this.models = [...response.data]\n      })\n     getAccessoryInWarehouse().then((response) => {\n          var temp = [...response.data]\n          var result=[]\n          for(let item of temp){\n            var t = {\n              'key': item['key']+item['warehouseID'],\n              'model': item['model'],\n              'type' : item['type'],\n              'price': item['price'],\n              'num': item['num'],\n              'warehouse': item['warehouse']\n            }\n            result.push(t)\n          }\n          this.Data = result\n          this.DataShow = this.Data\n          this.input = ''\n          this.loading=false\n        })\n      //get all warehouseName\n      getWarehouseName().then((response) => {\n        this.warehouseSelection = [...response.data]\n        for (let val of this.warehouseSelection) {\n          let temp = {\n            'text': val,\n            'value': val\n          }\n          this.columns[4].filters.push(temp)\n          this.warehouses.push(val)\n        }\n        console.log(response)\n      })\n      //get all type\n      getAllType().then((response) => {\n        this.types = [...response.data]\n        for (let val of this.types) {\n          let temp = {\n            text: val,\n            value: val\n          }\n          this.columns[1].filters.push(temp)\n        }\n        console.log(response)\n      })\n\n\n    }\n\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  @import '~ant-design-vue/lib/style/themes/default.less';\n\n  #layout .ant-layout-header {\n    background: #fff;\n    color: #666;\n  }\n\n  .button-group {\n    margin-bottom: 1rem;\n\n    .button {\n      margin-right: 0.5rem;\n      margin-left: 0.5rem;\n      margin-top: 2.7rem;\n    }\n  }\n\n  .button-group2 {\n    margin-top: 3em;\n    margin-bottom: 1rem;\n    margin-left: 39rem\n  }\n</style>"],"sourceRoot":"src/views/accessory"}]}