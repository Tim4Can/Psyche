{"remainingRequest":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\staff\\staffManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\staff\\staffManage.vue","mtime":1562869728000},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1573725483614},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1573725517685}],"contextDependencies":[],"result":["import _Object$assign from \"D:\\\\Documents\\\\GitHub\\\\Psyche\\\\front-end\\\\db-front\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.search\";\nimport _toConsumableArray from \"D:\\\\Documents\\\\GitHub\\\\Psyche\\\\front-end\\\\db-front\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { STable } from '@/components';\nimport { PageView } from '@/layouts';\nimport { getStaffSheet, deleteStaffSheetRow, modifyStaffSheetRow, addStaffSheetRow } from '@/api/staff';\nimport Fuse from 'fuse.js';\nimport md5 from 'md5';\nimport ARow from \"ant-design-vue/es/grid/Row\";\nimport ACol from \"ant-design-vue/es/grid/Col\";\nvar statusMap = {\n  0: {\n    status: 'processing',\n    text: '巡检员'\n  },\n  1: {\n    status: 'success',\n    text: '维修员'\n  },\n  2: {\n    status: 'error',\n    text: '调度员'\n  }\n};\nexport default {\n  name: 'TableList',\n  inject: ['reload'],\n  components: {\n    ACol: ACol,\n    ARow: ARow,\n    PageView: PageView,\n    STable: STable\n  },\n  data: function data() {\n    return {\n      visible: false,\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      form: null,\n      mdl: {},\n      visible2: false,\n      visible3: false,\n      visible4: false,\n      visible5: false,\n      editPassword: false,\n      passwordCheck: \"disabled\",\n      newmdl: {\n        'id': '',\n        'name': '',\n        'accountID': '',\n        'password': '',\n        'status': '',\n        'telNumber': '',\n        'idCardNumber': '',\n        'startTime': '',\n        'endTime': ''\n      },\n      addmdl: {\n        'name': '',\n        'password': '',\n        'status': '0',\n        'telNumber': '',\n        'idCardNumber': '',\n        'startTime': '周一',\n        'endTime': '周日'\n      },\n      input: '',\n      input2: '',\n      input3: '',\n      sfData: [],\n      sfDataShow: [],\n      statusMap: statusMap,\n      todelete: '',\n      deleteInfo: '',\n      modifyInfo: '',\n      addInfo: '',\n      accountInfo: '',\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 查询参数\n      queryParam: {},\n      // 表头\n      columns: [{\n        title: '员工编号',\n        dataIndex: 'id',\n        align: 'center',\n        sorter: function sorter(a, b) {\n          return a.id > b.id;\n        }\n      }, {\n        title: '员工姓名',\n        align: 'center',\n        dataIndex: 'name'\n      }, {\n        title: '登录账号',\n        align: 'center',\n        dataIndex: 'accountID'\n      }, {\n        title: '员工身份',\n        align: 'center',\n        dataIndex: 'status',\n        filters: [{\n          text: '巡检员',\n          value: '0'\n        }, {\n          text: '维修员',\n          value: '1'\n        }, {\n          text: '调度员',\n          value: '2'\n        }],\n        onFilter: function onFilter(value, record) {\n          return record.status.indexOf(value) === 0;\n        },\n        scopedSlots: {\n          customRender: 'status'\n        }\n      }, {\n        title: '操作',\n        align: 'center',\n        width: '150px',\n        dataIndex: 'action',\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      selectedRowKeys: [],\n      selectedRows: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    getStaffSheet().then(function (response) {\n      var _console;\n\n      (_console = console).log.apply(_console, _toConsumableArray(response.data));\n\n      _this.sfData = _toConsumableArray(response.data);\n      _this.sfDataShow = _this.sfData;\n    });\n  },\n  watch: {\n    input: function input(pattern) {\n      if (pattern == '') {\n        this.sfDataShow = this.sfData;\n      } else {\n        var option = {\n          keys: ['id'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.sfData, option);\n        this.sfDataShow = fuse.search(pattern);\n      }\n    },\n    input2: function input2(pattern) {\n      if (pattern == '') {\n        this.sfDataShow = this.sfData;\n      } else {\n        var option = {\n          keys: ['name'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.sfData, option);\n        this.sfDataShow = fuse.search(pattern);\n      }\n    },\n    input3: function input3(pattern) {\n      if (pattern == '') {\n        this.sfDataShow = this.sfData;\n      } else {\n        var option = {\n          keys: ['accountID'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.sfData, option);\n        this.sfDataShow = fuse.search(pattern);\n      }\n    }\n  },\n  computed: {\n    successName: function successName() {\n      if (this.newmdl.name === '') {\n        return \"error\";\n      }\n\n      return \"success\";\n    },\n    successTel: function successTel() {\n      if (this.newmdl.telNumber.length !== 11) {\n        return \"error\";\n      }\n\n      if (!/(^[0-9]\\d*$)/.test(this.newmdl.telNumber)) {\n        return \"error\";\n      } else {\n        return \"success\";\n      }\n    },\n    successIdcard: function successIdcard() {\n      if (this.newmdl.idCardNumber.length !== 18) {\n        return \"error\";\n      }\n\n      return \"success\";\n    },\n    successPassword: function successPassword() {\n      if (!this.editPassword) {\n        return \"success\";\n      }\n\n      if (this.newmdl.password.length < 8 || this.newmdl.password.length > 12) {\n        return \"error\";\n      }\n\n      return \"success\";\n    },\n    ifRepair: function ifRepair() {\n      console.log(\"visible\", this.newmdl.status);\n\n      if (this.newmdl.status === '1') {\n        console.log(\"disabled\");\n        return \"disabled\";\n      }\n    },\n    successAddName: function successAddName() {\n      if (this.addmdl.name === '') {\n        return \"error\";\n      }\n\n      return \"success\";\n    },\n    successAddPassword: function successAddPassword() {\n      if (this.addmdl.password.length < 8 || this.addmdl.password.length > 12) {\n        return \"error\";\n      }\n\n      return \"success\";\n    },\n    successAddTel: function successAddTel() {\n      if (this.addmdl.telNumber.length !== 11) {\n        return \"error\";\n      }\n\n      if (!/(^[0-9]\\d*$)/.test(this.addmdl.telNumber)) {\n        return \"error\";\n      }\n\n      return \"success\";\n    },\n    successAddIdNumber: function successAddIdNumber() {\n      if (this.addmdl.idCardNumber.length !== 18) {\n        return \"error\";\n      }\n\n      return \"success\";\n    },\n    ifAddRepair: function ifAddRepair() {\n      console.log(\"status\", this.addmdl.status);\n\n      if (this.addmdl.status === '1') {\n        console.log(\"disabled\");\n        return \"disabled\";\n      }\n    }\n  },\n  filters: {\n    statusFilter: function statusFilter(type) {\n      return statusMap[type].text;\n    },\n    statusTypeFilter: function statusTypeFilter(type) {\n      return statusMap[type].status;\n    }\n  },\n  methods: {\n    handleEdit: function handleEdit(record) {\n      this.mdl = _Object$assign({}, record);\n      this.newmdl.id = this.mdl.id;\n      this.newmdl.name = this.mdl.name;\n      this.newmdl.accountID = this.mdl.accountID;\n      this.newmdl.status = this.mdl.status;\n      this.newmdl.telNumber = this.mdl.detail[0].var;\n      this.newmdl.idCardNumber = this.mdl.detail[1].var;\n      this.newmdl.startTime = this.mdl.detail[4].var;\n      this.newmdl.endTime = this.mdl.detail[5].var;\n      console.log('detail', this.mdl.detail[0]);\n      this.visible = true;\n    },\n    handleOk: function handleOk() {\n      var h = this.$createElement;\n\n      if (this.successName === \"error\" || this.successTel === \"error\" || this.successIdcard === \"error\" || this.successPassword === \"error\") {\n        this.$notification.open({\n          message: '修改失败',\n          description: '请按要求填写员工新信息',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n        return;\n      }\n\n      this.visible2 = true;\n    },\n    handlenewOk: function handlenewOk() {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      this.visible = false;\n      this.visible2 = false;\n\n      if (this.editPassword) {\n        this.newmdl.password = md5(this.newmdl.password);\n      }\n\n      this.newmdl.password = this.mdl.password;\n      modifyStaffSheetRow(this.newmdl).then(function (response) {\n        _this2.modifyInfo = response.info;\n\n        if (_this2.modifyInfo === 'ok') {\n          _this2.newmdl.password = '';\n\n          _this2.$notification.open({\n            message: '修改成功',\n            description: '本条员工记录修改成功',\n            icon: h(\"a-icon\", {\n              \"attrs\": {\n                \"type\": \"check\"\n              },\n              \"style\": \"color: #108ee9\"\n            })\n          });\n\n          _this2.sfData = _toConsumableArray(response.data);\n          _this2.sfDataShow = _this2.sfData;\n        } else {\n          _this2.$notification.open({\n            message: '修改失败',\n            description: '本条员工记录修改失败',\n            icon: h(\"a-icon\", {\n              \"attrs\": {\n                \"type\": \"warning\"\n              },\n              \"style\": \"color: #108ee9\"\n            })\n          });\n        }\n      });\n    },\n    handlenewnewOk: function handlenewnewOk() {\n      var h = this.$createElement;\n\n      if (this.successAddName === \"error\" || this.successAddTel === \"error\" || this.successAddIdNumber === \"error\" || this.successAddPassword === \"error\") {\n        this.$notification.open({\n          message: '添加失败',\n          description: '请按要求填写新员工信息',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n        return;\n      }\n\n      this.visible5 = true;\n    },\n    modifyPassword: function modifyPassword() {\n      this.editPassword = true;\n      this.passwordCheck = false;\n    },\n    onClickDelete: function onClickDelete(id) {\n      console.log(id);\n      this.todelete = id;\n      this.visible3 = true;\n    },\n    //delete row\n    onClickDeleteRow: function onClickDeleteRow() {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      this.visible2 = false;\n      this.visible3 = false;\n\n      var newData = _toConsumableArray(this.sfDataShow);\n\n      console.log(newData);\n      var target = newData.filter(function (item) {\n        return _this3.todelete === item.id;\n      })[0];\n      console.log(target);\n      deleteStaffSheetRow({\n        id: target.id\n      }).then(function (response) {\n        _this3.deleteInfo = response.info;\n\n        if (_this3.deleteInfo === 'ok') {\n          _this3.sfData = _toConsumableArray(response.data);\n          _this3.sfDataShow = _this3.sfData;\n\n          _this3.$notification.open({\n            message: '删除成功',\n            description: '本条员工记录删除成功',\n            icon: h(\"a-icon\", {\n              \"attrs\": {\n                \"type\": \"check\"\n              },\n              \"style\": \"color: #108ee9\"\n            })\n          });\n        } else {\n          _this3.$notification.open({\n            message: '删除失败',\n            description: '本条员工记录删除失败',\n            icon: h(\"a-icon\", {\n              \"attrs\": {\n                \"type\": \"warning\"\n              },\n              \"style\": \"color: #108ee9\"\n            })\n          });\n        }\n      });\n    },\n    onClickRefresh: function onClickRefresh() {\n      this.reload();\n    },\n    onChange: function onChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectedRows = selectedRows;\n    },\n    toggleAdvanced: function toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n    handleAdd: function handleAdd() {\n      this.visible4 = true;\n    },\n    onClickNewRow: function onClickNewRow() {\n      var _this4 = this;\n\n      var h = this.$createElement;\n      this.visible4 = false;\n      this.visible5 = false;\n      this.addmdl.password = md5(this.addmdl.password);\n      addStaffSheetRow(this.addmdl).then(function (response) {\n        _this4.addInfo = response.info1;\n        _this4.accountInfo = response.info2;\n\n        if (_this4.addInfo === 'ok') {\n          _this4.$notification.open({\n            message: '添加成功',\n            description: '本条员工记录添加成功。新员工的账号为' + _this4.accountInfo,\n            icon: h(\"a-icon\", {\n              \"attrs\": {\n                \"type\": \"check\"\n              },\n              \"style\": \"color: #108ee9\"\n            })\n          });\n\n          _this4.sfData = _toConsumableArray(response.data);\n          _this4.sfDataShow = _this4.sfData;\n        } else {\n          _this4.$notification.open({\n            message: '添加失败',\n            description: '本条员工记录添加失败',\n            icon: h(\"a-icon\", {\n              \"attrs\": {\n                \"type\": \"warning\"\n              },\n              \"style\": \"color: #108ee9\"\n            })\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["staffManage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <page-view title=\"员工管理\">\n    <a-card :bordered=\"false\">\n      <div class=\"table-page-search-wrapper\">\n        <a-form layout=\"inline\">\n          <a-row :gutter=\"48\">\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"根据编号查找员工\">\n                <a-input placeholder=\"请输入员工编号\" v-model=\"input\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"根据姓名查找员工\">\n                <a-input placeholder=\"请输入员工姓名\" v-model=\"input2\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"根据账号查找员工\">\n                <a-input placeholder=\"请输入员工账号\" v-model=\"input3\"/>\n              </a-form-item>\n            </a-col>\n          </a-row>\n          <a-row :gutter=\"48\">\n            <a-col style=\" textAlign: 'left' margin-bottom: 24px\">\n              <a-button\n                size=\"large\"\n                class=\"button\"\n                type=\"primary\"\n                @click=\"onClickRefresh\"\n              >刷新表单\n              </a-button>\n              <br>\n            </a-col>\n            <a-col style=\" textAlign: 'right' margin-bottom: 24px\">\n              <div class=\"addButton\">\n                <a-button type=\"primary\" color=\"#108ee9\" size=\"large\" icon=\"plus\" @click=\"handleAdd\">新建</a-button>\n              </div>\n            </a-col>\n          </a-row>\n        </a-form>\n      </div>\n\n      <a-table\n        size=\"default\"\n        :columns=\"columns\"\n        :dataSource=\"sfDataShow\"\n        rowKey='id'\n        style=\" margin-top: 24px\"\n      >\n\n        <div\n          slot=\"expandedRowRender\"\n          slot-scope=\"record\"\n          style=\"margin: 0\">\n          <a-row\n            :gutter=\"24\"\n            :style=\"{ marginBottom: '12px' }\">\n            <a-col :span=\"12\" v-for=\"(role, index) in record.detail\" :key=\"index\" :style=\"{ marginBottom: '12px' }\">\n\n              <a-col :lg=\"8\" :md=\"24\" :span=\"20\">\n                <a-tag color='cyan'>{{ role.roleName }}：</a-tag>\n              </a-col>\n              <a-col :lg=\"14\">{{role.var}}</a-col>\n            </a-col>\n          </a-row>\n        </div>\n        <template slot='status' slot-scope=\"text\">\n          <a-badge :status=\"text | statusTypeFilter\" :text=\"text | statusFilter\"/>\n        </template>\n        <span slot=\"action\" slot-scope=\"text, record\">\n        <a @click=\"handleEdit(record)\">修改</a>\n        <a-divider type=\"vertical\"/>\n        <a @click=\"onClickDelete(record.id)\">删除</a>\n        <a-modal\n          title=\"确认删除\"\n          v-model=\"visible3\"\n          @ok=\"onClickDeleteRow\"\n        >\n                <div class=\"modal\">\n                    是否删除本条记录\n                </div></a-modal>\n      </span>\n      </a-table>\n\n      <a-modal\n        title=\"修改员工信息\"\n        style=\"top: 20px;\"\n        :width=\"800\"\n        v-model=\"visible\"\n        @ok=\"handleOk\"\n      >\n\n        <a-form :from=\"(form)=>{this.form = form} \" rowKey='id' bordered>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"员工编号\"\n            hasFeedback\n            validateStatus=\"success\"\n          >\n            <a-input placeholder=\"员工编号\" v-model=\"newmdl.id\" id=\"no\" disabled=\"disabled\"/>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"员工姓名\"\n            hasFeedback\n            :validateStatus=\"successName\"\n          >\n            <a-input placeholder=\"新名字\" v-model=\"newmdl.name\" id=\"role_name\"/>\n          </a-form-item>\n\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"员工身份\"\n            hasFeedback\n            validateStatus=\"success\"\n          >\n            <a-select disabled v-model=\"mdl.status\">\n              <a-select-option value=\"0\">巡检员</a-select-option>\n              <a-select-option value=\"1\">维修员</a-select-option>\n              <a-select-option value=\"2\">调度员</a-select-option>\n            </a-select>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"登录账号\"\n            hasFeedback\n            validateStatus=\"success\"\n          >\n            <a-input disabled=\"disabled\" v-model=\"newmdl.accountID\" id=\"role_name\"/>\n          </a-form-item>\n\n      \n          <a-row :gutter=\"24\" style=\"margin-left: 2rem\">\n            <a-col :md=\"24\" :lg=\"18\">\n              <a-form-item\n                :labelCol=\"labelCol\"\n                :wrapperCol=\"wrapperCol\"\n                label=\"密码\"\n                hasFeedback\n                :validateStatus=\"successPassword\"\n              >\n                <a-input :disabled=\"passwordCheck\" placeholder=\"新密码(8-12位)\" v-model=\"newmdl.password\" id=\"role_password\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"24\" :lg=\"6\">\n              <a-button @click=\"modifyPassword\">\n                编辑\n              </a-button>\n            </a-col>\n          </a-row>\n\n       \n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"电话\"\n            hasFeedback\n            :validateStatus=\"successTel\"\n          >\n            <a-input placeholder=\"新电话(11位)\" v-model=\"newmdl.telNumber\" id=\"role_telnumber\"/>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"身份证号码\"\n            hasFeedback\n            :validateStatus=\"successIdcard\"\n          >\n            <a-input placeholder=\"重新填写身份证号码(18位)\" v-model=\"newmdl.idCardNumber\" id=\"role_idCard\"/>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"每周工作开始时间\"\n            hasFeedback\n            validateStatus=\"success\"\n            visible='false'\n          >\n            <a-select :disabled=\"ifRepair\" v-model=\"newmdl.startTime\">\n              <a-select-option value=\"周一\">周一</a-select-option>\n              <a-select-option value=\"周二\">周二</a-select-option>\n              <a-select-option value=\"周三\">周三</a-select-option>\n              <a-select-option value=\"周四\">周四</a-select-option>\n              <a-select-option value=\"周五\">周五</a-select-option>\n              <a-select-option value=\"周六\">周六</a-select-option>\n              <a-select-option value=\"周日\">周日</a-select-option>\n            </a-select>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"每周工作结束时间\"\n            hasFeedback\n            validateStatus=\"success\"\n          >\n            <a-select :disabled=\"ifRepair\" v-model=\"newmdl.endTime\">\n              <a-select-option value=\"周一\">周一</a-select-option>\n              <a-select-option value=\"周二\">周二</a-select-option>\n              <a-select-option value=\"周三\">周三</a-select-option>\n              <a-select-option value=\"周四\">周四</a-select-option>\n              <a-select-option value=\"周五\">周五</a-select-option>\n              <a-select-option value=\"周六\">周六</a-select-option>\n              <a-select-option value=\"周日\">周日</a-select-option>\n            </a-select>\n          </a-form-item>\n        \n          <a-divider/>\n        \n\n        </a-form>\n        <a-modal\n          title=\"确认修改\"\n          v-model=\"visible2\"\n          @ok=\"handlenewOk\"\n        >\n          <div class=\"modal\">\n            是否确认修改\n          </div>\n        </a-modal>\n      </a-modal>\n\n\n      <a-modal\n        title=\"添加新员工\"\n        style=\"top: 20px;\"\n        :width=\"800\"\n        v-model=\"visible4\"\n        @ok=\"handlenewnewOk\"\n      >\n        <a-form :from=\"(form)=>{this.form = form} \" rowKey='id' bordered>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"员工姓名\"\n            :validateStatus=\"successAddName\"\n            hasFeedback\n          >\n            <a-input placeholder=\"请输入新用户姓名\" v-model=\"addmdl.name\" id=\"role_name\"/>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"员工身份\"\n            hasFeedback\n            validateStatus=\"success\"\n          >\n            <a-select v-model=\"addmdl.status\">\n              <a-select-option value=\"0\">巡检员</a-select-option>\n              <a-select-option value=\"1\">维修员</a-select-option>\n              <a-select-option value=\"2\">调度员</a-select-option>\n            </a-select>\n          </a-form-item>\n\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"密码\"\n            hasFeedback\n            :validateStatus=\"successAddPassword\"\n          >\n            <a-input placeholder=\"请输入新用户密码(8-12位)\" v-model=\"addmdl.password\" id=\"role_password\"/>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"电话\"\n            hasFeedback\n            :validateStatus=\"successAddTel\"\n          >\n            <a-input placeholder=\"请填写新用户电话(11位)\" v-model=\"addmdl.telNumber\" id=\"role_telnumber\"/>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"身份证号码\"\n            hasFeedback\n            :validateStatus=\"successAddIdNumber\"\n          >\n            <a-input placeholder=\"请填写新用户身份证号码(18位)\" v-model=\"addmdl.idCardNumber\" id=\"role_idCard\"/>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"每周工作开始时间\"\n            validateStatus=\"success\"\n            hasFeedback\n          >\n            <a-select :disabled=\"ifAddRepair\" v-model=\"addmdl.startTime\">\n              <a-select-option value=\"周一\">周一</a-select-option>\n              <a-select-option value=\"周二\">周二</a-select-option>\n              <a-select-option value=\"周三\">周三</a-select-option>\n              <a-select-option value=\"周四\">周四</a-select-option>\n              <a-select-option value=\"周五\">周五</a-select-option>\n              <a-select-option value=\"周六\">周六</a-select-option>\n              <a-select-option value=\"周日\">周日</a-select-option>\n            </a-select>\n          </a-form-item>\n\n          <a-form-item\n            :labelCol=\"labelCol\"\n            :wrapperCol=\"wrapperCol\"\n            label=\"每周工作结束时间\"\n            validateStatus=\"success\"\n            hasFeedback\n          >\n            <a-select :disabled=\"ifAddRepair\" v-model=\"addmdl.endTime\">\n              <a-select-option value=\"周一\">周一</a-select-option>\n              <a-select-option value=\"周二\">周二</a-select-option>\n              <a-select-option value=\"周三\">周三</a-select-option>\n              <a-select-option value=\"周四\">周四</a-select-option>\n              <a-select-option value=\"周五\">周五</a-select-option>\n              <a-select-option value=\"周六\">周六</a-select-option>\n              <a-select-option value=\"周日\">周日</a-select-option>\n            </a-select>\n          </a-form-item>\n\n\n        </a-form>\n        <a-modal\n          title=\"确认添加\"\n          v-model=\"visible5\"\n          @ok=\"onClickNewRow\"\n        >\n          <div class=\"modal\">\n            是否确认添加\n          </div>\n        </a-modal>\n      </a-modal>\n\n\n    </a-card>\n  </page-view>\n</template>\n\n<script>\nimport { STable } from '@/components'\nimport { PageView } from '@/layouts'\nimport { getStaffSheet, deleteStaffSheetRow, modifyStaffSheetRow, addStaffSheetRow } from '@/api/staff'\nimport Fuse from 'fuse.js'\nimport md5 from 'md5'\nimport ARow from \"ant-design-vue/es/grid/Row\";\nimport ACol from \"ant-design-vue/es/grid/Col\";\n\nconst statusMap = {\n  0: {\n    status: 'processing',\n    text: '巡检员'\n  },\n  1: {\n    status: 'success',\n    text: '维修员'\n  },\n  2: {\n    status: 'error',\n    text: '调度员'\n  }\n}\n\nexport default {\n  name: 'TableList',\n  inject: ['reload'],\n  components: {\n    ACol,\n    ARow,\n    PageView,\n    STable\n  },\n  data () {\n    return {\n\n      visible: false,\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 5 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      },\n      form: null,\n      mdl: {},\n      visible2: false,\n      visible3:false,\n      visible4:false,\n      visible5:false,\n      editPassword:false,\n      passwordCheck:\"disabled\",\n      newmdl:{\n        'id':'',\n        'name':'',\n        'accountID':'',\n        'password':'',\n        'status':'',\n        'telNumber':'',\n        'idCardNumber':'',\n        'startTime':'',\n        'endTime':''\n      },\n      addmdl:{\n        'name':'',\n        'password':'',\n        'status':'0',\n        'telNumber':'',\n        'idCardNumber':'',\n        'startTime':'周一',\n        'endTime':'周日'\n      },\n      input:'',\n      input2: '',\n      input3:'',\n      sfData:[],\n      sfDataShow:[],\n      statusMap,\n      todelete:'',\n      deleteInfo:'',\n      modifyInfo:'',\n      addInfo:'',\n      accountInfo:'',\n\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 查询参数\n      queryParam: {},\n      // 表头\n      columns: [\n        {\n          title: '员工编号',\n          dataIndex: 'id',\n          align:'center',\n          sorter:(a,b) => a.id > b.id\n        },\n        {\n          title: '员工姓名',\n          align:'center',\n          dataIndex: 'name'\n        },\n        {\n          title: '登录账号',\n          align:'center',\n          dataIndex: 'accountID'\n        },\n         {\n          title: '员工身份',\n          align:'center',\n          dataIndex: 'status',\n          filters:[{\n            text:'巡检员',\n            value:'0'\n          },{\n            text:'维修员',\n            value:'1',\n          },{\n            text:'调度员',\n            value:'2'\n          }],\n          onFilter:(value,record) => record.status.indexOf(value) === 0,\n          scopedSlots: { customRender: 'status' }\n        },{\n          title: '操作',\n          align:'center',\n          width: '150px',\n          dataIndex: 'action',\n          scopedSlots: { customRender: 'action' }\n        }\n      ],\n\n      selectedRowKeys: [],\n      selectedRows: []\n    }\n  },\n  created () {\n    getStaffSheet().then((response) => {\n      console.log(...response.data)\n      this.sfData = [...response.data]\n      this.sfDataShow = this.sfData\n    })\n  },\n  watch:{\n    input(pattern){\n          if(pattern == ''){\n              this.sfDataShow = this.sfData\n          }\n          else{\n              const option = {\n                  keys: ['id'],\n                  threshold: 0.1\n              }\n              var fuse = new Fuse(this.sfData,option)\n              this.sfDataShow = fuse.search(pattern)\n          }\n      },\n      input2(pattern){\n          if(pattern == ''){\n              this.sfDataShow = this.sfData\n          }\n          else{\n              const option = {\n                  keys: ['name'],\n                  threshold: 0.1\n              }\n              var fuse = new Fuse(this.sfData,option)\n              this.sfDataShow = fuse.search(pattern)\n          }\n      },\n      input3(pattern){\n          if(pattern == ''){\n              this.sfDataShow = this.sfData\n          }\n          else{\n              const option = {\n                  keys: ['accountID'],\n                  threshold: 0.1\n              }\n              var fuse = new Fuse(this.sfData,option)\n              this.sfDataShow = fuse.search(pattern)\n          }\n      }\n  },\n  computed:{\n      successName: function(){\n        if(this.newmdl.name === ''){\n          return \"error\"\n        }\n        return \"success\"\n      },\n      successTel: function(){\n        if(this.newmdl.telNumber.length !== 11){\n          return \"error\"\n        }\n        if(!(/(^[0-9]\\d*$)/.test(this.newmdl.telNumber))){\n          return \"error\"\n      }else{\n        return \"success\"\n      }\n      },\n      successIdcard: function(){\n        if(this.newmdl.idCardNumber.length !== 18){\n          return \"error\"\n        }\n        return \"success\"\n      },\n      successPassword: function(){\n        if(!this.editPassword){\n          return \"success\"\n        }\n        if(this.newmdl.password.length < 8||this.newmdl.password.length > 12){\n          return \"error\"\n        }\n        return \"success\"\n      },\n      ifRepair: function(){\n        console.log(\"visible\",this.newmdl.status)\n        if(this.newmdl.status === '1'){\n          console.log(\"disabled\")\n          return \"disabled\"\n        }\n      },\n      successAddName: function(){\n        if(this.addmdl.name === ''){\n          return \"error\"\n        }\n        return \"success\"\n      },\n      successAddPassword: function(){\n        if(this.addmdl.password.length < 8 ||this.addmdl.password.length > 12){\n          return \"error\"\n        }\n        return \"success\"\n      },\n      successAddTel: function(){\n        if(this.addmdl.telNumber.length !== 11){\n          return \"error\"\n        }\n        if(!(/(^[0-9]\\d*$)/.test(this.addmdl.telNumber))){\n          return \"error\"\n        }\n        return \"success\"\n      },\n      successAddIdNumber: function(){\n        if(this.addmdl.idCardNumber.length !== 18){\n          return \"error\"\n        }\n        return \"success\"\n      },\n      ifAddRepair: function(){\n        console.log(\"status\",this.addmdl.status)\n        if(this.addmdl.status === '1'){\n          console.log(\"disabled\")\n          return \"disabled\"\n        }\n      },\n  },\n  filters: {\n    statusFilter (type) {\n      return statusMap[type].text\n    },\n    statusTypeFilter (type) {\n      return statusMap[type].status\n    }\n  },\n  methods: {\n    handleEdit (record) {\n      this.mdl = Object.assign({}, record)\n      this.newmdl.id = this.mdl.id\n      this.newmdl.name = this.mdl.name\n      this.newmdl.accountID = this.mdl.accountID\n      this.newmdl.status = this.mdl.status\n      this.newmdl.telNumber = this.mdl.detail[0].var\n      this.newmdl.idCardNumber=this.mdl.detail[1].var\n      this.newmdl.startTime = this.mdl.detail[4].var\n      this.newmdl.endTime = this.mdl.detail[5].var\n      console.log('detail',this.mdl.detail[0])\n\n      this.visible = true\n    },\n    handleOk () {\n      if(this.successName === \"error\"||this.successTel === \"error\"||\n      this.successIdcard === \"error\"||this.successPassword === \"error\"){\n        this.$notification.open({\n          message: '修改失败',\n          description: '请按要求填写员工新信息',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />,\n        });\n        return;\n      }\n      this.visible2 = true\n    },\n    handlenewOk(){\n      this.visible =false\n      this.visible2 = false\n      if(this.editPassword){\n        this.newmdl.password = md5(this.newmdl.password)\n      }\n      this.newmdl.password = this.mdl.password\n      modifyStaffSheetRow(this.newmdl).then((response) => {\n        this.modifyInfo = response.info\n        if(this.modifyInfo === 'ok'){\n          this.newmdl.password=''\n          this.$notification.open({\n          message: '修改成功',\n          description: '本条员工记录修改成功',\n          icon: <a-icon type=\"check\" style=\"color: #108ee9\" />,\n        });\n        this.sfData = [...response.data]\n          this.sfDataShow = this.sfData\n        }\n        else{\n          this.$notification.open({\n          message: '修改失败',\n          description: '本条员工记录修改失败',\n          icon: <a-icon type=\"warning\" style=\"color: #108ee9\" />,\n        });\n        }\n      })\n    },\n    handlenewnewOk(){\n      if(this.successAddName === \"error\"||this.successAddTel === \"error\"||\n      this.successAddIdNumber === \"error\"||this.successAddPassword === \"error\"){\n        this.$notification.open({\n          message: '添加失败',\n          description: '请按要求填写新员工信息',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />,\n        });\n        return;\n      }\n      this.visible5 = true\n\n    },\n    modifyPassword(){\n      this.editPassword = true\n      this.passwordCheck = false\n    },\n    onClickDelete (id) {\n      console.log(id)\n      this.todelete = id\n      this.visible3 = true;\n    },\n    //delete row\n    onClickDeleteRow () {\n      this.visible2 = false\n      this.visible3 = false\n      const newData = [...this.sfDataShow]\n      console.log(newData)\n      const target = newData.filter(item => this.todelete === item.id)[0]\n      console.log(target)\n      deleteStaffSheetRow({id:target.id}).then((response) => {\n        this.deleteInfo = response.info\n        if(this.deleteInfo === 'ok'){\n          this.sfData = [...response.data]\n          this.sfDataShow = this.sfData\n          this.$notification.open({\n          message: '删除成功',\n          description: '本条员工记录删除成功',\n          icon: <a-icon type=\"check\" style=\"color: #108ee9\" />,\n        });\n        }\n        else{\n          this.$notification.open({\n          message: '删除失败',\n          description: '本条员工记录删除失败',\n          icon: <a-icon type=\"warning\" style=\"color: #108ee9\" />,\n        });\n        }\n      })\n\n    },\n    onClickRefresh(){\n      this.reload()\n    },\n    onChange (selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    toggleAdvanced () {\n      this.advanced = !this.advanced\n    },\n    handleAdd () {\n      this.visible4 = true\n    },\n    onClickNewRow(){\n      this.visible4 = false\n      this.visible5 = false\n       this.addmdl.password = md5(this.addmdl.password)\n       addStaffSheetRow(this.addmdl).then((response) => {\n        this.addInfo = response.info1\n        this.accountInfo = response.info2\n        if(this.addInfo === 'ok'){\n          this.$notification.open({\n          message: '添加成功',\n          description: '本条员工记录添加成功。新员工的账号为'+this.accountInfo,\n          icon: <a-icon type=\"check\" style=\"color: #108ee9\" />,\n        });\n          this.sfData = [...response.data]\n          this.sfDataShow = this.sfData\n        }\n        else{\n          this.$notification.open({\n          message: '添加失败',\n          description: '本条员工记录添加失败',\n          icon: <a-icon type=\"warning\" style=\"color: #108ee9\" />,\n        });\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.addButton{\n    position: absolute;\n    z-index: 999;\n    right:1em;\n    top:0em;\n  }\n</style>"],"sourceRoot":"src/views/staff"}]}