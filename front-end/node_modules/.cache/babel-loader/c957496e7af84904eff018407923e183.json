{"remainingRequest":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\sheets\\components\\repairSheetDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\sheets\\components\\repairSheetDetail.vue","mtime":1562869728000},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1573725483614},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1573725517685}],"contextDependencies":[],"result":["import _parseInt from \"D:\\\\Documents\\\\GitHub\\\\Psyche\\\\front-end\\\\db-front\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-int\";\nimport _defineProperty from \"D:\\\\Documents\\\\GitHub\\\\Psyche\\\\front-end\\\\db-front\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mixinDevice } from '@/utils/mixin';\nimport { PageView } from '@/layouts';\nimport DetailList from '@/components/tools/DetailList';\nimport { getRepairSheetDetail, submitScheduleDetail } from '@/api/sheets';\nimport ACol from \"ant-design-vue/es/grid/Col\";\nimport { mapGetters } from 'vuex';\nvar DetailListItem = DetailList.Item;\nconsole.log(\"DetailListItem\", DetailListItem);\nvar columns = [{\n  title: '器材/配件',\n  dataIndex: 'statue',\n  width: '25%',\n  filters: [{\n    text: '器材',\n    value: '器材'\n  }, {\n    text: '配件',\n    value: '配件'\n  }],\n  onFilter: function onFilter(value, record) {\n    return record.statue.indexOf(value) === 0;\n  },\n  scopedSlots: {\n    customRender: 'statue'\n  }\n}, {\n  title: '类型',\n  dataIndex: 'type',\n  width: '25%',\n  scopedSlots: {\n    customRender: 'type'\n  }\n}, {\n  title: '型号',\n  dataIndex: 'model',\n  width: '25%',\n  scopedSlots: {\n    customRender: 'model'\n  }\n}, {\n  title: '数量',\n  dataIndex: 'number',\n  width: '25%',\n  scopedSlots: {\n    customRender: 'number'\n  },\n  sorter: function sorter(a, b) {\n    return a.number > b.number;\n  }\n}];\nexport default {\n  inject: ['reload'],\n  created: function created() {\n    var _this = this;\n\n    this.result.DSTid = this.userInfo.id;\n    this.details = this.$route.params.details;\n    this.result.RSTid = this.details.title;\n    this.eqID = this.details.eqID;\n    console.log(\"this.details.eqID\", this.details.EqId);\n    getRepairSheetDetail().then(function (response) {\n      console.log(\"response\", response.data);\n      _this.eqType = response.data.equipType;\n      _this.acType = response.data.accessory;\n      _this.stfList = response.data.staff;\n      console.log(\"eqType\", _this.eqType[0]);\n      console.log(\"acType\", _this.acType);\n      console.log(\"acType\", _this.stfList);\n    });\n  },\n  name: 'repairSheetDetail',\n  components: {\n    ACol: ACol,\n    PageView: PageView,\n    DetailList: DetailList,\n    DetailListItem: DetailListItem\n  },\n  mixins: [mixinDevice],\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      activeTabKey: '1',\n      rpData: [],\n      columns: columns,\n      eqType: [],\n      acType: [],\n      stfList: [],\n      eqID: '',\n      visible2: true,\n      eqSelected: false,\n      submit: false,\n      result: {\n        'DSTid': '',\n        'RSTid': '',\n        'stfId': '',\n        'ls': []\n      },\n      eqInfo: '',\n      tempRow: {\n        'type': '',\n        'model': '',\n        'number': '',\n        'statue': '',\n        'key': 1\n      },\n      tempKey: 1,\n      details: this.$route.params.details,\n      eqNum: '',\n      tempEq: '',\n      tempAc: '',\n      acNum: ''\n    }, _defineProperty(_ref, \"columns\", columns), _defineProperty(_ref, \"visible\", false), _defineProperty(_ref, \"info\", ''), _ref;\n  },\n  filters: {\n    statusFilter: function statusFilter(status) {\n      var statusMap = {\n        'agree': '成功',\n        'reject': '驳回'\n      };\n      return statusMap[status];\n    },\n    statusTypeFilter: function statusTypeFilter(type) {\n      var statusTypeMap = {\n        'agree': 'success',\n        'reject': 'error'\n      };\n      return statusTypeMap[type];\n    }\n  },\n  computed: {\n    userInfo: function userInfo() {\n      return this.$store.getters.userInfo;\n    },\n    qualified: function qualified() {\n      if (this.details.state == '0' || this.details.state == '2') {\n        return \"disabled\";\n      }\n    },\n    qualifiedForEq: function qualifiedForEq() {\n      console.log(\"eqselected\", this.eqSelected);\n\n      if (this.details.state == '0' || this.details.state == '2' || this.eqSelected) {\n        return \"disabled\";\n      }\n    },\n    successRepair: function successRepair() {\n      if (this.result.stfId === '') {\n        return \"error\";\n      } else {\n        return \"success\";\n      }\n    },\n    maxEqNum: function maxEqNum() {\n      if (this.tempEq === '') {\n        return;\n      }\n\n      var tempEqSelect = _parseInt(this.tempEq);\n\n      var tempEqNum = this.eqType[tempEqSelect].number;\n      console.log(\"maxNum\", tempEqNum);\n      return tempEqNum; //let temp = this.eqType[this.tempEq-'0'].number-'0'\n    },\n    maxAcNum: function maxAcNum() {\n      if (this.tempAc === '') {\n        return;\n      }\n\n      var tempAcSelect = _parseInt(this.tempAc);\n\n      var tempAcNum = this.acType[tempAcSelect].number;\n      console.log(\"maxNum\", tempAcNum);\n      return tempAcNum; //let temp = this.eqType[this.tempEq-'0'].number-'0'\n    },\n    compare: function compare() {\n      if (this.tempEq === '') {\n        return \"success\";\n      }\n\n      if (!/(^[1-9]\\d*$)/.test(this.eqNum)) {\n        return \"error\";\n      }\n\n      var tempEqSelect = _parseInt(this.tempEq);\n\n      var tempEqNum = this.eqType[tempEqSelect].number;\n      console.log(\"maxNum\", tempEqNum);\n\n      if (this.eqNum !== '') {\n        var inputTemp = _parseInt(this.eqNum);\n\n        console.log(\"input\", inputTemp);\n\n        if (inputTemp > tempEqNum) {\n          return \"error\";\n        } else {\n          return \"success\";\n        }\n      }\n\n      return \"error\"; //let temp = this.eqType[this.tempEq-'0'].number-'0'\n    },\n    compareAc: function compareAc() {\n      if (this.tempAc === '') {\n        return \"success\";\n      }\n\n      if (!/(^[1-9]\\d*$)/.test(this.acNum)) {\n        return \"error\";\n      }\n\n      var tempAcSelect = _parseInt(this.tempAc);\n\n      var tempAcNum = this.acType[tempAcSelect].number;\n      console.log(\"maxNum2\", tempAcNum);\n\n      if (this.acNum !== '') {\n        var inputTemp = _parseInt(this.acNum);\n\n        console.log(\"input2\", inputTemp);\n\n        if (inputTemp > tempAcNum) {\n          return \"error\";\n        } else {\n          return \"success\";\n        }\n      }\n\n      return \"error\"; //let temp = this.eqType[this.tempEq-'0'].number-'0'\n    },\n    text: function text() {\n      if (this.tempEq !== '') {\n        return \"最大数量:\" + this.maxEqNum;\n      } else {\n        return \"每次仅允许调度一个器材\";\n      }\n    },\n    textAc: function textAc() {\n      if (this.tempAc !== '') {\n        return \"最大数量:\" + this.maxAcNum;\n      } else {\n        return \"请输入数量\";\n      }\n    },\n    qualifiedforButton: function qualifiedforButton() {\n      if (this.details.state == '0' || this.details.state == '2' || this.eqSelected) {\n        return \"disabled\";\n      }\n\n      if (this.tempEq === '' || this.result.stfId === '') {\n        return \"disabled\";\n      }\n    },\n    qualifiedforButtonAc: function qualifiedforButtonAc() {\n      if (this.details.state == '0' || this.details.state == '2') {\n        return \"disabled\";\n      }\n\n      if (this.tempAc === '' || this.acNum === '' || this.result.stfId === '') {\n        return \"disabled\";\n      }\n    },\n    qualifiedforSubmit: function qualifiedforSubmit() {\n      console.log(\"length\", this.result.ls.length);\n\n      if (this.result.ls.length === 0 || this.submit) {\n        return \"disabled\";\n      }\n    }\n  },\n  methods: {\n    handleOK: function handleOK() {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      this.visible = false;\n      this.result.stfId = \"ST\" + this.result.stfId;\n      console.log(\"this.result.stfId\", this.result.stfId);\n      submitScheduleDetail(this.result).then(function (response) {\n        _this2.info = response.info;\n\n        if (_this2.info === 'ok') {\n          _this2.submit = true;\n          _this2.details.state = '2';\n\n          _this2.$notification.open({\n            message: '调度成功',\n            description: '本条报修单调度成功',\n            icon: h(\"a-icon\", {\n              \"attrs\": {\n                \"type\": \"check\"\n              },\n              \"style\": \"color: #108ee9\"\n            })\n          });\n        }\n      });\n    },\n    onClickSubmit: function onClickSubmit() {\n      this.visible = true;\n    },\n    handleStaffChange: function handleStaffChange(value) {\n      this.result.stfId = value;\n      console.log(\"newId\", this.result.stfId);\n    },\n    handleEqChange: function handleEqChange(value) {\n      this.tempEq = value;\n      console.log(\"newEq\", this.tempEq);\n    },\n    handleAcChange: function handleAcChange(value) {\n      this.tempAc = value;\n      console.log(\"newAc\", this.tempAc);\n    },\n    handleAddEq: function handleAddEq() {\n      var h = this.$createElement;\n      this.eqNum = '1';\n\n      var tempEqSelect = _parseInt(this.tempEq);\n\n      var tempEqNum = this.eqType[tempEqSelect].number;\n      console.log(\"容量\", tempEqNum);\n\n      var inputTemp = _parseInt(this.eqNum);\n\n      console.log(\"需求\", inputTemp);\n\n      if (inputTemp > tempEqNum) {\n        this.$notification.open({\n          message: '添加失败',\n          description: '仓储不足，请先补充仓储器材',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n        return;\n      } else {\n        this.eqSelected = true;\n        console.log(\"rowls\", this.result.ls);\n        this.tempKey = this.tempKey + 1;\n        console.log(\"tempKey\", this.tempKey);\n        this.result.ls.push({\n          'type': this.eqType[tempEqSelect].type,\n          'model': this.eqType[tempEqSelect].model,\n          'number': inputTemp,\n          'statue': '器材',\n          'key': this.tempKey + 1\n        });\n        this.eqNum = '';\n        this.eqType[tempEqSelect].number = String(this.eqType[tempEqSelect].number - _parseInt(inputTemp));\n        console.log(\"eqNumber\", this.eqType.number);\n      }\n    },\n    handleAddAc: function handleAddAc() {\n      var h = this.$createElement;\n\n      if (!/(^[1-9]\\d*$)/.test(this.acNum)) {\n        this.$notification.open({\n          message: '添加失败',\n          description: '请输入合法的数字字符',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n        return;\n      }\n\n      var tempAcSelect = _parseInt(this.tempAc);\n\n      var tempAcNum = this.acType[tempAcSelect].number;\n      console.log(\"容量2\", tempAcNum);\n\n      var inputTemp = _parseInt(this.acNum);\n\n      console.log(\"需求2\", inputTemp);\n\n      if (inputTemp > tempAcNum) {\n        this.$notification.open({\n          message: '添加失败',\n          description: '仓储不足，请先补充仓储配件',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n        return;\n      } else {\n        console.log(\"rowls\", this.result.ls);\n        this.tempRow.key = this.tempKey + 1;\n        this.tempKey = this.tempKey + 1;\n        console.log(\"tempKey\", this.tempKey);\n        this.result.ls.push({\n          'type': this.acType[tempAcSelect].type,\n          'model': this.acType[tempAcSelect].model,\n          'number': inputTemp,\n          'statue': '配件',\n          'key': this.tempKey + 1\n        });\n        this.acNum = '';\n        this.acType[tempAcSelect].number = String(this.acType[tempAcSelect].number - _parseInt(inputTemp));\n      }\n    }\n  }\n};",{"version":3,"sources":["repairSheetDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <page-view title=\"报修单\" logo=\"/repairSheet.png\">\n\n    <detail-list slot=\"headerContent\" size=\"small\" :col=\"1\" class=\"detail-layout\">\n      <detail-list-item term=\"待检修器材\">{{this.details.EqId}}</detail-list-item>\n      <detail-list-item term=\"详细描述\">{{this.details.details}}</detail-list-item>\n      <detail-list-item term=\"所需配件\">{{this.details.stuffNeeded}}</detail-list-item>\n      <detail-list-item term=\"报修用户电话\">{{this.details.telNumber}}</detail-list-item>\n    </detail-list>\n    <a-row slot=\"extra\" class=\"status-list\" >\n      <a-col :xs=\"12\" :sm=\"12\">\n        <div class=\"text\">报修单单号</div>\n        <div class=\"heading\" span = \"4\">{{this.details.title}}</div>\n      </a-col>\n    </a-row>\n    \n\n    <a-card :bordered='false' :gutter=\"24\">\n        <div class=\"photo\" > \n          <a-row >\n          <a-col  style=\"textAlign:center; margin-bottom:0px;margin-top:0px\">\n            <div class=\"heading\" style=\"margin-bottom: 12px\">\n              <a-avatar  size=\"large\" shape=\"square\" src=\"/camera.png\"/>\n              {{\"故障器材图片\"}}\n              </div>\n          </a-col>\n          </a-row>\n          <a-col style=\"textAlign:center\">\n        <img :src=\"details.cover\" :alt=\"details.title\" />\n          </a-col>\n        </div>\n      </a-card>\n\n    <a-card :bordered=\"false\" title=\" \">\n      <a-col  style=\"textAlign:center; margin-bottom:18px\">\n            <div class=\"heading\" >{{\"报修单进度\"}}</div>\n          </a-col>\n      <a-steps :direction=\"isMobile() && 'vertical' || 'horizontal'\" :current=\"this.details.state-'0'\" progressDot>\n        <a-step title=\"用户提交\">\n        </a-step>\n        <a-step title=\"巡检员提交\">\n        </a-step>\n        <a-step title=\"调度完成\">\n        </a-step>\n      </a-steps>\n    </a-card>\n\n      <a-card :bordered='false' title=\" \" :visible=\"false\" >\n        <a-col  style=\"textAlign:center ; margin-bottom:0px\">\n            <div class=\"heading\" >{{\"调度\"}}</div>\n          </a-col>\n        <a-row  grid last>\n\n          <a-row>\n            <a-col :span='8'>\n              <a-form-item  :validate-status=\"successRepair\" style=\"textAlign:left\" label=\"维 修 员 \" :label-col=\"{ span: 8 }\" :wrapper-col=\"{ span: 15 }\" \n               >\n                <a-select :disabled=\"qualified\"\n                  style=\"max-width: 200px; width: 120%;\"\n                  placeholder=\"选择维修员\"\n                  @change=\"handleStaffChange\"\n                >\n                  <a-select-option v-for=\"id in this.stfList\" :key=\"id.staffId\" >\n                    {{id.staffName}}\n                  </a-select-option>\n\n                </a-select>\n              </a-form-item>\n            </a-col>\n          </a-row>\n            <a-row>\n            <a-col :span='8'>\n              <a-form-item label=\"器材选择\" :label-col=\"{ span: 8 }\" :wrapper-col=\"{ span: 15 }\" style=\"textAlign:left\">\n                <a-select :disabled=\"qualifiedForEq\"\n                  style=\"width: 120%;\"\n                  placeholder=\"选择器材类型\"\n                  @change=\"handleEqChange\"\n                >\n                  <a-select-option v-for=\"eq in this.eqType\" :key=\"eq.no\">\n                    {{eq.type+' '+eq.model}}\n                    </a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n     \n            \n            <a-col :span='9'>\n              <a-form-item validate-status=\"success\" label=\"数量\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 18 }\">\n                <a-input  disabled=\"disabled\"\n                  :placeholder=\"text\"\n                  maxLength=\"15\"\n                  style=\"width: 100%\"\n                  v-model=\"eqNum\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span='6' style=\"\">\n              <a-button  :disabled=\"qualifiedforButton\" type='primary' @click=\"handleAddEq\">添加</a-button>\n            </a-col>\n      \n            </a-row>\n        </a-row>\n        <a-row grid last>\n            <a-row>\n            <a-col :span='8'>\n              <a-form-item label=\"配件选择\" :label-col=\"{ span: 8 }\" :wrapper-col=\"{ span: 15 }\">\n                <a-select :disabled=\"qualified\"\n                  style=\"width: 120%;\"\n                  placeholder=\"选择配件类型\"\n                  @change=\"handleAcChange\"\n                >\n                  <a-select-option v-for=\"ac in this.acType\" :key=\"ac.no\">\n                    {{ac.type+' '+ac.model}}\n                  </a-select-option>\n                \n                </a-select>\n              </a-form-item>\n            </a-col>\n      \n            <a-col :span='9'>\n              <a-form-item :validate-status=\"compareAc\" label=\"数量\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 18 }\">\n                <a-input  :disabled=\"qualified\"\n                  :placeholder=\"textAc\"\n                  maxLength=\"15\"\n                  style=\"width: 100%\"\n                  v-model=\"acNum\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col :span='6'>\n              <a-button  :disabled=\"qualifiedforButtonAc\" type='primary' @click=\"handleAddAc\">添加</a-button>\n            </a-col>\n            </a-row>\n        </a-row>\n        <div :span='9' style =\"margin-bottom:24px\">\n        <a-button  :disabled=\"qualifiedforSubmit\" type='primary' @click=\"onClickSubmit\">提交</a-button>\n        <a-modal\n                title=\"确认提交\"\n                v-model =\"visible\"\n                @ok = \"handleOK\"\n                >\n                <div class = \"modal\">\n                    是否完成本次调度\n                </div></a-modal>\n        </div>\n        \n        <!-- table -->\n        <a-table :columns=\"columns\"   :dataSource=\"this.result.ls\"  bordered>\n          <template\n            v-for=\"col in ['statue','type','model', 'number']\"\n            :slot=\"col\"\n            slot-scope=\"text\"\n          >\n            <div :key=\"col\">\n              {{ text }}\n            </div>\n          </template>\n         \n          \n        </a-table>\n        <!-- table end -->\n       \n      </a-card>\n      \n    \n    </page-view>\n\n</template>\n\n<script>\nimport { mixinDevice } from '@/utils/mixin'\nimport { PageView } from '@/layouts'\nimport DetailList from '@/components/tools/DetailList'\nimport {getRepairSheetDetail, submitScheduleDetail} from '@/api/sheets'\nimport ACol from \"ant-design-vue/es/grid/Col\";\n  import {mapGetters} from 'vuex'\n\n\n\nconst DetailListItem = DetailList.Item\nconsole.log(\"DetailListItem\",DetailListItem)\n\nconst columns = [{\n  title: '器材/配件',\n  dataIndex: 'statue',\n  width: '25%',\n  filters:[\n    {\n      text:'器材',\n      value:'器材'\n    },{\n      text:'配件',\n      value:'配件',\n    }],\n  onFilter:(value,record) => record.statue.indexOf(value) === 0,\n  scopedSlots: { customRender: 'statue' },\n}, {\n  title: '类型',\n  dataIndex: 'type',\n  width: '25%',\n  scopedSlots: { customRender: 'type' },\n},{\n  title: '型号',\n  dataIndex: 'model',\n  width: '25%',\n  scopedSlots: { customRender: 'model' },\n}, {\n  title: '数量',\n  dataIndex: 'number',\n  width: '25%',\n  scopedSlots: { customRender: 'number' },\n  sorter: (a, b) => a.number > b.number,\n}]\n\nexport default {\n    inject: ['reload'],\n    created(){\n      this.result.DSTid = this.userInfo.id\n      \n      this.details = this.$route.params.details\n      this.result.RSTid = this.details.title\n      this.eqID = this.details.eqID\n      console.log(\"this.details.eqID\",this.details.EqId)\n      getRepairSheetDetail().then((response)=>{\n        console.log(\"response\",response.data)\n        this.eqType = response.data.equipType\n        this.acType = response.data.accessory\n        this.stfList = response.data.staff\n        console.log(\"eqType\",this.eqType[0])\n        console.log(\"acType\",this.acType)\n        console.log(\"acType\",this.stfList)\n      })\n        \n    },\n    name: 'repairSheetDetail',\n    components: {\n      ACol,\n    PageView,\n    \n    DetailList,\n    DetailListItem\n  },\n    mixins: [mixinDevice],\n  data () {\n    return {\n      activeTabKey: '1',\n      rpData:[],\n      columns,\n      eqType:[],\n      acType:[],\n      stfList:[],\n      eqID:'',\n      visible2:true,\n      eqSelected:false,\n      submit:false,\n      result:{\n        'DSTid':'',\n        'RSTid':'',\n        'stfId':'',\n        'ls':[]\n      },\n      eqInfo:'',\n      tempRow:{\n        'type':'',\n        'model':'',\n        'number':'',\n        'statue':'',\n        'key':1\n      },\n      tempKey:1,\n      details: this.$route.params.details,\n      eqNum:'',\n      tempEq:'',\n      tempAc:'',\n      acNum:'',\n      columns,\n      visible:false,\n      info:'',\n    }\n  },\n  filters: {\n    statusFilter (status) {\n      const statusMap = {\n        'agree': '成功',\n        'reject': '驳回'\n      }\n      return statusMap[status]\n    },\n    statusTypeFilter (type) {\n      const statusTypeMap = {\n        'agree': 'success',\n        'reject': 'error'\n      }\n      return statusTypeMap[type]\n    }\n  },\n  computed:{\n    userInfo() {\n        return this.$store.getters.userInfo\n      },\n    qualified:function(){\n      if(this.details.state == '0'||this.details.state=='2'){\n        return \"disabled\"\n      }\n    },\n    qualifiedForEq:function(){\n      console.log(\"eqselected\",this.eqSelected)\n      if(this.details.state == '0'||this.details.state=='2'||this.eqSelected){\n        return \"disabled\"\n      }\n    },\n    successRepair:function(){\n      if(this.result.stfId === ''){\n        return \"error\"\n      }\n      else{\n        return \"success\"\n      }\n    },\n    maxEqNum:function(){\n      if(this.tempEq === ''){\n        return \n      }\n      var tempEqSelect = parseInt(this.tempEq)\n      var tempEqNum = this.eqType[tempEqSelect].number\n      console.log(\"maxNum\",tempEqNum)\n      return tempEqNum\n      //let temp = this.eqType[this.tempEq-'0'].number-'0'\n      \n    },\n    maxAcNum:function(){\n      if(this.tempAc === ''){\n        return \n      }\n      var tempAcSelect = parseInt(this.tempAc)\n      var tempAcNum = this.acType[tempAcSelect].number\n      console.log(\"maxNum\",tempAcNum)\n      return tempAcNum\n      //let temp = this.eqType[this.tempEq-'0'].number-'0'\n      \n    },\n    compare:function(){\n      if(this.tempEq === ''){\n        return \"success\"\n      }\n      if(!(/(^[1-9]\\d*$)/.test(this.eqNum))){\n        return \"error\"\n      }\n      var tempEqSelect = parseInt(this.tempEq)\n      var tempEqNum = this.eqType[tempEqSelect].number\n      console.log(\"maxNum\",tempEqNum)\n      if(this.eqNum!==''){\n        var inputTemp = parseInt(this.eqNum)\n        console.log(\"input\",inputTemp)\n        if(inputTemp > tempEqNum){\n          return \"error\"\n        }\n        else{\n          return \"success\"\n        }\n      }\n      return \"error\"\n      //let temp = this.eqType[this.tempEq-'0'].number-'0'\n      \n    },\n    compareAc:function(){\n      if(this.tempAc === ''){\n        return \"success\"\n      }\n      if (!(/(^[1-9]\\d*$)/.test(this.acNum))){\n        return \"error\"\n      }\n      var tempAcSelect = parseInt(this.tempAc)\n      var tempAcNum = this.acType[tempAcSelect].number\n      console.log(\"maxNum2\",tempAcNum)\n      if(this.acNum!==''){\n        var inputTemp = parseInt(this.acNum)\n        console.log(\"input2\",inputTemp)\n        if(inputTemp > tempAcNum){\n          return \"error\"\n        }\n        else{\n          return \"success\"\n        }\n      }\n      return \"error\"\n      //let temp = this.eqType[this.tempEq-'0'].number-'0'\n      \n    },\n    text:function(){\n      if(this.tempEq !== ''){\n        return \"最大数量:\"+this.maxEqNum\n      }\n      else{\n        return \"每次仅允许调度一个器材\"\n      }\n    },\n    textAc:function(){\n      if(this.tempAc !== ''){\n        return \"最大数量:\"+this.maxAcNum\n      }\n      else{\n        return \"请输入数量\"\n      }\n    },\n    qualifiedforButton:function(){\n    if(this.details.state == '0'||this.details.state=='2'||this.eqSelected){\n        return \"disabled\"\n      }\n    if(this.tempEq === ''||this.result.stfId === ''){\n      return \"disabled\"\n    }\n  },\n  qualifiedforButtonAc:function(){\n    if(this.details.state == '0'||this.details.state=='2'){\n        return \"disabled\"\n      }\n    if(this.tempAc === ''||this.acNum === ''||this.result.stfId === ''){\n      return \"disabled\"\n    }\n  },\n  qualifiedforSubmit:function(){\n    console.log(\"length\",this.result.ls.length)\n    if(this.result.ls.length === 0||this.submit){\n        return \"disabled\"\n      }\n  },\n  }, \n  methods:{\n    handleOK(){\n      \n      this.visible = false\n      this.result.stfId = \"ST\"+this.result.stfId\n      console.log(\"this.result.stfId\",this.result.stfId)\n      submitScheduleDetail(this.result).then((response) =>{\n        this.info = response.info\n        if(this.info === 'ok'){\n          this.submit = true\n          this.details.state = '2'\n          this.$notification.open({\n          message: '调度成功',\n          description: '本条报修单调度成功',\n          icon: <a-icon type=\"check\" style=\"color: #108ee9\" />,\n        });\n        }\n      })\n    },\n    onClickSubmit(){\n      this.visible = true\n    },\n    handleStaffChange(value){\n      this.result.stfId = value\n      console.log(\"newId\",this.result.stfId)\n    },\n    handleEqChange(value){\n      this.tempEq = value\n      console.log(\"newEq\",this.tempEq)\n    },\n    handleAcChange(value){\n      this.tempAc = value\n      console.log(\"newAc\",this.tempAc)\n    },\n    handleAddEq(){\n      this.eqNum = '1'\n      var tempEqSelect = parseInt(this.tempEq)\n      var tempEqNum = this.eqType[tempEqSelect].number\n      console.log(\"容量\",tempEqNum)\n      var inputTemp = parseInt(this.eqNum)\n      console.log(\"需求\",inputTemp)\n      if(inputTemp > tempEqNum){\n        this.$notification.open({\n          message: '添加失败',\n          description: '仓储不足，请先补充仓储器材',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />,\n        });\n        return;\n      }\n      else{\n          this.eqSelected = true\n          console.log(\"rowls\",this.result.ls)\n          this.tempKey = this.tempKey + 1\n          console.log(\"tempKey\",this.tempKey)\n          this.result.ls.push({\n            'type': this.eqType[tempEqSelect].type,\n            'model': this.eqType[tempEqSelect].model,\n            'number': inputTemp,\n            'statue':'器材',\n            'key' : this.tempKey+1\n          })\n          this.eqNum = ''\n          this.eqType[tempEqSelect].number = String(this.eqType[tempEqSelect].number-parseInt(inputTemp))\n          console.log(\"eqNumber\",this.eqType.number )\n      }\n    },\n    handleAddAc(){\n      if(!(/(^[1-9]\\d*$)/.test(this.acNum))){\n        this.$notification.open({\n          message: '添加失败',\n          description: '请输入合法的数字字符',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />,\n        });\n        return;\n      }\n      var tempAcSelect = parseInt(this.tempAc)\n      var tempAcNum = this.acType[tempAcSelect].number\n      console.log(\"容量2\",tempAcNum)\n      var inputTemp = parseInt(this.acNum)\n      console.log(\"需求2\",inputTemp)\n      if(inputTemp > tempAcNum){\n        this.$notification.open({\n          message: '添加失败',\n          description: '仓储不足，请先补充仓储配件',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />,\n        });\n        return;\n      }\n      else{\n        console.log(\"rowls\",this.result.ls)\n           this.tempRow.key = this.tempKey+1\n          this.tempKey = this.tempKey + 1\n          console.log(\"tempKey\",this.tempKey)\n          this.result.ls.push({\n            'type': this.acType[tempAcSelect].type,\n            'model': this.acType[tempAcSelect].model,\n            'number':inputTemp,\n            'statue':'配件',\n            'key' : this.tempKey+1\n          })\n          this.acNum = ''\n          this.acType[tempAcSelect].number = String(this.acType[tempAcSelect].number-parseInt(inputTemp))\n      }\n    }\n},\n}\n\n</script>\n\n<style lang=\"less\" scoped>\n\n  .detail-layout {\n    margin-left: 44px;\n  }\n  .text {\n    color: rgba(0, 0, 0, .45);\n  }\n\n  .heading {\n    color: rgba(0, 0, 0, .85);\n    font-size: 20px;\n  }\n\n  .no-data {\n    color: rgba(0, 0, 0, .25);\n    text-align: center;\n    line-height: 64px;\n    font-size: 16px;\n\n    i {\n      font-size: 24px;\n      margin-right: 16px;\n      position: relative;\n      top: 3px;\n    }\n  }\n\n  .photo {\n      align: center;\n  }\n\n  .mobile {\n    .detail-layout {\n      margin-left: unset;\n    }\n    .text {\n\n    }\n    .status-list {\n      text-align: left;\n    }\n  }\n</style>"],"sourceRoot":"src/views/sheets/components"}]}