{"remainingRequest":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\warehouse\\WarehouseDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\src\\views\\warehouse\\WarehouseDetail.vue","mtime":1562869728000},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1573725483614},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\db-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1573725517685}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"D:\\\\Documents\\\\GitHub\\\\Psyche\\\\front-end\\\\db-front\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { postWarehouseDetail, postAllWarehouse, postGoods, postSchedule } from '@/api/warehouse';\nimport { PageView } from '@/layouts';\nimport Fuse from 'fuse.js';\nexport default {\n  inject: ['reload'],\n  name: 'Detail',\n  components: {\n    PageView: PageView\n  },\n  data: function data() {\n    return {\n      // form and columns names\n      form: this.$form.createForm(this),\n      acol: [{\n        title: '编号',\n        dataIndex: 'id',\n        align: 'center',\n        width: '30%',\n        sorter: function sorter(a, b) {\n          return a.model > b.model;\n        },\n        scopedSlots: {\n          customRender: 'model'\n        }\n      }, {\n        title: '型号',\n        dataIndex: 'model',\n        align: 'center',\n        sorter: function sorter(a, b) {\n          return a.model > b.model;\n        },\n        scopedSlots: {\n          customRender: 'model'\n        }\n      }, {\n        title: '数量',\n        dataIndex: 'number',\n        align: 'center',\n        width: '20%',\n        sorter: function sorter(a, b) {\n          return a.number - b.number;\n        },\n        scopedSlots: {\n          customRender: 'number'\n        }\n      }, {\n        title: '操作',\n        dataIndex: 'operation',\n        align: 'center',\n        width: '20%',\n        scopedSlots: {\n          customRender: 'operation'\n        }\n      }],\n      ecol: [{\n        title: '编号',\n        dataIndex: 'id',\n        align: 'center',\n        width: '30%',\n        sorter: function sorter(a, b) {\n          return a.id > b.id;\n        },\n        scopedSlots: {\n          customRender: 'id'\n        }\n      }, {\n        title: '型号',\n        dataIndex: 'model',\n        align: 'center',\n        sorter: function sorter(a, b) {\n          return a.model > b.model;\n        },\n        scopedSlots: {\n          customRender: 'model'\n        }\n      }, {\n        title: '操作',\n        dataIndex: 'operation',\n        align: 'center',\n        width: '20%',\n        scopedSlots: {\n          customRender: 'operation'\n        }\n      }],\n      // data\n      // origin data\n      accessory: [],\n      equipment: [],\n      // show data\n      accessoryShow: [],\n      equipmentShow: [],\n      // input data, search by key\n      accessoryInput: '',\n      equipmentInput: '',\n      // the ID of this warehouse\n      warehouseID: this.$route.params.id,\n      // detail data of this warehouse\n      warehouseDetail: {\n        name: '',\n        address: '',\n        detailAddress: ''\n      },\n      // show modal\n      visibleA: false,\n      visibleE: false,\n      // max and min of number to be scheduled\n      max: 0,\n      min: 1,\n      // the data of all warehouse\n      allWarehouse: [],\n      // the index of \"to\" warehouse\n      to: 0,\n      // 2 schedules\n      scheduleA: {\n        type: 'Accessory',\n        id: String,\n        model: String,\n        from: String,\n        // the name of \"to\" warehouse\n        to: String,\n        num: 1\n      },\n      scheduleE: {\n        type: 'Equipment',\n        id: String,\n        from: String,\n        // the name of \"to\" warehouse\n        to: String\n      }\n    };\n  },\n  // watch for fuzzy search\n  watch: {\n    accessoryInput: function accessoryInput(pattern) {\n      if (pattern == '') {\n        this.accessoryShow = this.accessory;\n      } else {\n        var option = {\n          keys: ['id'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.accessory, option);\n        this.accessoryShow = fuse.search(pattern);\n      }\n    },\n    equipmentInput: function equipmentInput(pattern) {\n      if (pattern == '') {\n        this.equipmentShow = this.equipment;\n      } else {\n        var option = {\n          keys: ['id'],\n          threshold: 0.1\n        };\n        var fuse = new Fuse(this.equipment, option);\n        this.equipmentShow = fuse.search(pattern);\n      }\n    }\n  },\n  methods: {\n    // schedule for equipment\n    scheduleEquipment: function scheduleEquipment(id) {\n      var newData = _toConsumableArray(this.equipment);\n\n      var target = newData.filter(function (item) {\n        return id === item.id;\n      })[0];\n      this.max = target.number;\n      this.visibleE = true;\n      this.scheduleE.id = target.id;\n      this.scheduleE.from = this.warehouseDetail.name;\n    },\n    // schedule for accessory\n    scheduleAccessory: function scheduleAccessory(id) {\n      var h = this.$createElement;\n\n      var newData = _toConsumableArray(this.accessory);\n\n      var target = newData.filter(function (item) {\n        return id === item.id;\n      })[0];\n      this.max = target.number;\n      this.visibleA = true;\n\n      if (typeof this.scheduleA.num !== 'number') {\n        this.$notification.open({\n          message: '添加失败',\n          description: '请输入合法的数字',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n        return;\n      }\n\n      this.scheduleA.model = target.model;\n      this.scheduleA.id = target.id;\n      this.scheduleA.from = this.warehouseDetail.name;\n    },\n    // event after click ok\n    handleOKE: function handleOKE(e) {\n      var _this = this;\n\n      var h = this.$createElement;\n      // the \"to\" in json schedule need to be changed from index to string\n      this.scheduleE.to = this.allWarehouse[this.to];\n      postSchedule([this.scheduleE]).then(function (response) {\n        _this.equipment = _toConsumableArray(response.data);\n        _this.equipmentShow = _this.equipment;\n\n        _this.$notification.open({\n          message: '调度成功!',\n          description: '请继续你的操作',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: blue\"\n          })\n        });\n      }).catch(function (err) {\n        _this.$notification.open({\n          message: '添加失败',\n          description: '请查看控制台信息',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: blue\"\n          })\n        });\n\n        console.log(err);\n      });\n      this.visibleE = false;\n    },\n    handleOKA: function handleOKA(e) {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      // the \"to\" in json schedule need to be changed from index to string\n      this.scheduleA.to = this.allWarehouse[this.to];\n      postSchedule([this.scheduleA]).then(function (response) {\n        _this2.accessory = _toConsumableArray(response.data);\n        _this2.accessoryShow = _this2.accessory;\n\n        _this2.$notification.open({\n          message: '调度成功!',\n          description: '请继续你的操作',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n      }).catch(function (err) {\n        _this2.$notification.open({\n          message: '添加失败',\n          description: '请查看控制台信息',\n          icon: h(\"a-icon\", {\n            \"attrs\": {\n              \"type\": \"exclamation-circle\"\n            },\n            \"style\": \"color: #108ee9\"\n          })\n        });\n\n        console.log(err);\n      });\n      this.visibleA = false;\n    }\n  },\n  created: function created() {\n    var _this3 = this;\n\n    var h = this.$createElement;\n    // get detail info of warehouse\n    postWarehouseDetail({\n      id: this.warehouseID\n    }).then(function (response) {\n      _this3.warehouseDetail.name = response.data.name;\n      _this3.warehouseDetail.address = response.data.address;\n      _this3.warehouseDetail.detailAddress = response.data.detailAddress;\n    }).catch(function (err) {\n      _this3.$notification.open({\n        message: '获取仓库详情失败',\n        description: '请查看控制台信息',\n        icon: h(\"a-icon\", {\n          \"attrs\": {\n            \"type\": \"exclamation-circle\"\n          },\n          \"style\": \"color: #108ee9\"\n        })\n      });\n\n      console.log(err);\n    }); // get info of goods\n\n    postAllWarehouse({\n      id: this.warehouseID\n    }).then(function (response) {\n      _this3.allWarehouse = _toConsumableArray(response.data);\n    }).catch(function (err) {\n      _this3.$notification.open({\n        message: '获取仓库列表失败',\n        description: '请查看控制台信息',\n        icon: h(\"a-icon\", {\n          \"attrs\": {\n            \"type\": \"exclamation-circle\"\n          },\n          \"style\": \"color: #108ee9\"\n        })\n      });\n\n      console.log(err);\n    });\n    postGoods({\n      id: this.warehouseID\n    }).then(function (response) {\n      _this3.equipment = _toConsumableArray(response.data.equipment);\n      _this3.equipmentShow = _this3.equipment;\n      _this3.accessory = _toConsumableArray(response.data.accessory);\n      _this3.accessoryShow = _this3.accessory;\n    }).catch(function (err) {\n      _this3.$notification.open({\n        message: '获取物品信息失败',\n        description: '请查看控制台信息',\n        icon: h(\"a-icon\", {\n          \"attrs\": {\n            \"type\": \"exclamation-circle\"\n          },\n          \"style\": \"color: #108ee9\"\n        })\n      });\n\n      console.log(err);\n    });\n  }\n};",{"version":3,"sources":["WarehouseDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <page-view title=\"仓库详情\">\n    <a-card>\n      <div id=\"layout\">\n        <!-- warehouse message -->\n        <a-layout>\n          <a-layout-header>您现在位于 {{ warehouseDetail.address }} {{ warehouseDetail.detailAddress }}的 {{ warehouseDetail.name }}</a-layout-header>\n          <!-- warehouse message end -->\n          <a-card :bordered=\"false\">\n            <!-- refresh button -->\n            <div class=\"button-group\">\n              <a-button\n                size=\"large\"\n                class=\"button\"\n                type=\"primary\"\n                @click=\"reload()\"\n                icon=\"reload\"\n              >刷新</a-button>\n            </div>\n            <!-- refresh end -->\n            <!-- equipment table -->\n            <div>\n              <a-form class=\"ant-advanced-search-form\" :form=\"form\">\n                <a-row :gutter=\"24\">\n                  <a-col :md=\"8\" :sm=\"24\">\n                    <a-form-item>\n                      <a-input placeholder=\"请输入器材编号\" v-model=\"equipmentInput\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-form>\n            </div>\n            <a-table :columns=\"ecol\" :dataSource=\"equipmentShow\" rowKey=\"id\" bordered>\n              <template v-for=\"col in ['id','model', 'type']\" :slot=\"col\" slot-scope=\"text\">\n                <div :key=\"col\">\n                  <div>{{ text }}</div>\n                </div>\n              </template>\n              <template slot=\"operation\" slot-scope=\"text, record\">\n                <div class=\"editable-row-operations\">\n                  <a-button @click=\"() => scheduleEquipment(record.id)\">调度</a-button>\n                  <!-- modal -->\n                  <a-modal title=\"调度\" v-model=\"visibleE\" @ok=\"handleOKE\">\n                    <div class=\"modal\">\n                      调出到\n                      <a-select style=\"width: 200px\" v-model=\"to\">\n                        <a-select-option\n                          v-for=\"(item, index) in allWarehouse\"\n                          :key=\"index\"\n                        >{{ item }}</a-select-option>\n                      </a-select>仓库\n                    </div>\n                  </a-modal>\n                  <!-- modal end -->\n                </div>\n              </template>\n            </a-table>\n            <!-- equipment table end -->\n\n            <!-- accessory table -->\n            <div>\n              <a-form class=\"ant-advanced-search-form\" :form=\"form\">\n                <a-row :gutter=\"24\">\n                  <a-col :md=\"8\" :sm=\"24\">\n                    <a-form-item>\n                      <a-input placeholder=\"请输入配件编号\" v-model=\"accessoryInput\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-form>\n            </div>\n            <a-table :columns=\"acol\" :dataSource=\"accessoryShow\" rowKey=\"id\" bordered>\n              <template\n                v-for=\"col in ['id','model', 'type', 'number']\"\n                :slot=\"col\"\n                slot-scope=\"text\"\n              >\n                <div :key=\"col\">\n                  <div>{{ text }}</div>\n                </div>\n              </template>\n              <template slot=\"operation\" slot-scope=\"text, record\">\n                <div class=\"editable-row-operations\">\n                  <a-button @click=\"() => scheduleAccessory(record.id)\">调度</a-button>\n                  <!-- modal -->\n                  <a-modal title=\"调度\" v-model=\"visibleA\" @ok=\"handleOKA\">\n                    <div class=\"modal\">\n                      调出到\n                      <a-select style=\"width: 200px\" v-model=\"to\">\n                        <a-select-option\n                          v-for=\"(item, index) in allWarehouse\"\n                          :key=\"index\"\n                        >{{ item }}</a-select-option>\n                      </a-select>仓库\n                    </div>\n                    <div class=\"modal\">\n                      数量:\n                      <a-input-number\n                        :max=\"max\"\n                        :min=\"min\"\n                        class=\"modal-number\"\n                        v-model=\"scheduleA.num\"\n                      />\n                    </div>\n                  </a-modal>\n                  <!-- modal end -->\n                </div>\n              </template>\n            </a-table>\n            <!-- accessory table end -->\n          </a-card>\n        </a-layout>\n      </div>\n    </a-card>\n  </page-view>\n</template>\n\n<script>\nimport { postWarehouseDetail, postAllWarehouse, postGoods, postSchedule } from '@/api/warehouse'\nimport { PageView } from '@/layouts'\nimport Fuse from 'fuse.js'\n\nexport default {\n  inject: ['reload'],\n  name: 'Detail',\n  components: {\n    PageView\n  },\n  data() {\n    return {\n      // form and columns names\n      form: this.$form.createForm(this),\n      acol: [\n        {\n          title: '编号',\n          dataIndex: 'id',\n          align: 'center',\n          width: '30%',\n          sorter: (a, b) => a.model > b.model,\n          scopedSlots: { customRender: 'model' }\n        },\n        {\n          title: '型号',\n          dataIndex: 'model',\n          align: 'center',\n          sorter: (a, b) => a.model > b.model,\n          scopedSlots: { customRender: 'model' }\n        },\n        {\n          title: '数量',\n          dataIndex: 'number',\n          align: 'center',\n          width: '20%',\n          sorter: (a, b) => a.number - b.number,\n          scopedSlots: { customRender: 'number' }\n        },\n        {\n          title: '操作',\n          dataIndex: 'operation',\n          align: 'center',\n          width: '20%',\n          scopedSlots: { customRender: 'operation' }\n        }\n      ],\n      ecol: [\n        {\n          title: '编号',\n          dataIndex: 'id',\n          align: 'center',\n          width: '30%',\n          sorter: (a, b) => a.id > b.id,\n          scopedSlots: { customRender: 'id' }\n        },\n        {\n          title: '型号',\n          dataIndex: 'model',\n          align: 'center',\n          sorter: (a, b) => a.model > b.model,\n          scopedSlots: { customRender: 'model' }\n        },\n        {\n          title: '操作',\n          dataIndex: 'operation',\n          align: 'center',\n          width: '20%',\n          scopedSlots: { customRender: 'operation' }\n        }\n      ],\n\n      // data\n      // origin data\n      accessory: [],\n      equipment: [],\n      // show data\n      accessoryShow: [],\n      equipmentShow: [],\n      // input data, search by key\n      accessoryInput: '',\n      equipmentInput: '',\n      // the ID of this warehouse\n      warehouseID: this.$route.params.id,\n      // detail data of this warehouse\n      warehouseDetail: {\n        name: '',\n        address: '',\n        detailAddress: ''\n      },\n      // show modal\n      visibleA: false,\n      visibleE: false,\n      // max and min of number to be scheduled\n      max: 0,\n      min: 1,\n      // the data of all warehouse\n      allWarehouse: [],\n      // the index of \"to\" warehouse\n      to: 0,\n      // 2 schedules\n      scheduleA: {\n        type: 'Accessory',\n        id: String,\n        model: String,\n        from: String,\n        // the name of \"to\" warehouse\n        to: String,\n        num: 1\n      },\n      scheduleE: {\n        type: 'Equipment',\n        id: String,\n        from: String,\n        // the name of \"to\" warehouse\n        to: String\n      }\n    }\n  },\n  // watch for fuzzy search\n  watch: {\n    accessoryInput(pattern) {\n      if (pattern == '') {\n        this.accessoryShow = this.accessory\n      } else {\n        const option = {\n          keys: ['id'],\n          threshold: 0.1\n        }\n        var fuse = new Fuse(this.accessory, option)\n        this.accessoryShow = fuse.search(pattern)\n      }\n    },\n    equipmentInput(pattern) {\n      if (pattern == '') {\n        this.equipmentShow = this.equipment\n      } else {\n        const option = {\n          keys: ['id'],\n          threshold: 0.1\n        }\n        var fuse = new Fuse(this.equipment, option)\n        this.equipmentShow = fuse.search(pattern)\n      }\n    }\n  },\n  methods: {\n    // schedule for equipment\n    scheduleEquipment(id) {\n      const newData = [...this.equipment]\n      const target = newData.filter(item => id === item.id)[0]\n      this.max = target.number\n      this.visibleE = true\n\n      this.scheduleE.id = target.id\n      this.scheduleE.from = this.warehouseDetail.name\n    },\n    // schedule for accessory\n    scheduleAccessory(id) {\n      const newData = [...this.accessory]\n      const target = newData.filter(item => id === item.id)[0]\n      this.max = target.number\n      this.visibleA = true\n\n      if (typeof this.scheduleA.num !== 'number') {\n        this.$notification.open({\n          message: '添加失败',\n          description: '请输入合法的数字',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />\n        })\n        return\n      }\n\n      this.scheduleA.model = target.model\n      this.scheduleA.id = target.id\n      this.scheduleA.from = this.warehouseDetail.name\n    },\n    // event after click ok\n    handleOKE(e) {\n      // the \"to\" in json schedule need to be changed from index to string\n      this.scheduleE.to = this.allWarehouse[this.to]\n      postSchedule([this.scheduleE])\n        .then(response => {\n          this.equipment = [...response.data]\n          this.equipmentShow = this.equipment\n          this.$notification.open({\n            message: '调度成功!',\n            description: '请继续你的操作',\n            icon: <a-icon type=\"exclamation-circle\" style=\"color: blue\" />\n          })\n        })\n        .catch(err => {\n          this.$notification.open({\n            message: '添加失败',\n            description: '请查看控制台信息',\n            icon: <a-icon type=\"exclamation-circle\" style=\"color: blue\" />\n          })\n          console.log(err)\n        })\n      this.visibleE = false\n    },\n    handleOKA(e) {\n      // the \"to\" in json schedule need to be changed from index to string\n      this.scheduleA.to = this.allWarehouse[this.to]\n      postSchedule([this.scheduleA])\n        .then(response => {\n          this.accessory = [...response.data]\n          this.accessoryShow = this.accessory\n          this.$notification.open({\n            message: '调度成功!',\n            description: '请继续你的操作',\n            icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />\n          })\n        })\n        .catch(err => {\n          this.$notification.open({\n            message: '添加失败',\n            description: '请查看控制台信息',\n            icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />\n          })\n          console.log(err)\n        })\n      this.visibleA = false\n    }\n  },\n  created() {\n    // get detail info of warehouse\n    postWarehouseDetail({ id: this.warehouseID })\n      .then(response => {\n        this.warehouseDetail.name = response.data.name\n        this.warehouseDetail.address = response.data.address\n        this.warehouseDetail.detailAddress = response.data.detailAddress\n      })\n      .catch(err => {\n        this.$notification.open({\n          message: '获取仓库详情失败',\n          description: '请查看控制台信息',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />\n        })\n        console.log(err)\n      })\n    // get info of goods\n    postAllWarehouse({ id: this.warehouseID })\n      .then(response => {\n        this.allWarehouse = [...response.data]\n      })\n      .catch(err => {\n        this.$notification.open({\n          message: '获取仓库列表失败',\n          description: '请查看控制台信息',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />\n        })\n        console.log(err)\n      })\n    postGoods({ id: this.warehouseID })\n      .then(response => {\n        this.equipment = [...response.data.equipment]\n        this.equipmentShow = this.equipment\n        this.accessory = [...response.data.accessory]\n        this.accessoryShow = this.accessory\n      })\n      .catch(err => {\n        this.$notification.open({\n          message: '获取物品信息失败',\n          description: '请查看控制台信息',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />\n        })\n        console.log(err)\n      })\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '~ant-design-vue/lib/style/themes/default.less';\n#layout .ant-layout-header {\n  background: #fff;\n  color: #666;\n}\n.button-group {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n  .button {\n    margin-right: 5rem;\n    margin-left: 0.5rem;\n  }\n}\n\n.modal {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n  .modal-number {\n    margin-left: 0.6rem;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/warehouse"}]}