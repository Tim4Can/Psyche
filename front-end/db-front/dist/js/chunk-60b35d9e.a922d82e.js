(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60b35d9e"],{4161:function(e,t,a){"use strict";var n=a("c684"),r=a.n(n);r.a},"684c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-view",{attrs:{title:"仓储器材"}},[a("div",[a("a-card",{attrs:{bordered:!1}},[a("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:e.form,inline:""}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"器材编号："}},[a("a-input",{attrs:{placeholder:"请输入器材编号"},model:{value:e.inputID,callback:function(t){e.inputID=t},expression:"inputID"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"出厂时间："}},[a("a-input",{attrs:{placeholder:"请输入出厂时间"},model:{value:e.inputTime,callback:function(t){e.inputTime=t},expression:"inputTime"}})],1)],1),a("a-col",{staticStyle:{"text-align":"right"}},[a("a-button",{staticStyle:{"margin-right":"1rem"},attrs:{type:"primary",icon:"reload"},on:{click:function(t){return e.reload()}}},[e._v("刷新")]),a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addEquipment}},[e._v("添加器材")])],1)],1)],1),a("br"),a("a-table",{attrs:{columns:e.columns,dataSource:e.eDataShow,rowKey:"id",bordered:""},scopedSlots:e._u([e._l(["id"],function(t){return{key:t,fn:function(t){return[e._v(e._s(t))]}}}),{key:"status",fn:function(t){return[a("a-badge",{attrs:{status:e._f("statusTypeFilter")(t),text:e._f("statusFilter")(t)}})]}},{key:"price",fn:function(t){return[e._v(e._s("￥"+t))]}},{key:"icon",fn:function(t){return[a("div",{attrs:{id:"app"}},[a("div",{},[a("div",{staticClass:"pic",on:{click:function(){return e.showImg(t)}}},[a("a-avatar",{attrs:{src:t}})],1)]),a("vue-easy-lightbox",{attrs:{visible:e.visible,imgs:e.src},on:{hide:e.handleHide}})],1)]}}],null,!0)}),a("a-modal",{attrs:{footer:""},model:{value:e.showAddForm,callback:function(t){e.showAddForm=t},expression:"showAddForm"}},[a("a-form",{attrs:{title:"添加器材",form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[a("h3",[e._v("新建器材")])]),a("a-form-item",{attrs:{label:"名称",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请选择器材名称"}]}],expression:"[\n        'name',\n        {rules: [{ required: true, message: '请选择器材名称' }]}\n      ]"}],attrs:{placeholder:"请选择器材名称"}},e._l(this.allEquipType,function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(e._s(t))])}),1)],1),a("a-form-item",{attrs:{label:"出厂日期",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["productTime",{rules:[{required:!0,message:"请选择出厂日期"}]}],expression:"[\n          'productTime',\n          {rules: [{ required: true, message: '请选择出厂日期' }]}\n        ]"}],staticStyle:{width:"100%"},attrs:{name:"productTime",format:"YYYY.MM.DD"}})],1),a("a-form-item",{attrs:{label:"器材型号",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["model",{rules:[{required:!0,message:"请输入器材型号"}]}],expression:"[\n          'model',\n          {rules: [{ required: true, message: '请输入器材型号' }]}\n        ]"}],attrs:{name:"model",placeholder:"输入器材型号"}})],1),a("a-form-item",{attrs:{label:"仓库",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["warehouse",{rules:[{required:!0,message:"请选择所属仓库"}]}],expression:"[\n        'warehouse',\n        {rules: [{ required: true, message: '请选择所属仓库' }]}\n      ]"}],attrs:{placeholder:"请选择所属仓库"}},e._l(this.allWarehouse,function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(e._s(t))])}),1)],1),a("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("提交")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.cancelAddForm}},[e._v("取消")])],1)],1)],1)],1)],1)])},r=[],i=a("5d73"),s=a.n(i),o=(a("386d"),a("5176")),l=a.n(o),c=a("75fc"),u=(a("7f7f"),a("cebc")),d=(a("6b54"),a("e814")),m=a.n(d),p=(a("28a5"),a("f564")),h=a("35f3"),f=a("680a"),b=a("ffe7"),v=a.n(b),w=a("2b0e"),g=a("da65"),D=a.n(g),y=a("c1df"),q=a.n(y),x=a("da05");w["a"].use(D.a);var S={0:{status:"success",text:"全新"},1:{status:"error",text:"报废"}},C=[{title:"器材编号",dataIndex:"id",align:"center",width:"12%",scopedSlots:{customRender:"id"},sorter:function(e,t){return m()(e.id.toString().slice(2))-m()(t.id.toString().slice(2))}},{title:"名称",dataIndex:"name",align:"center",width:"10%",scopedSlots:{customRender:"name"}},{title:"图标",dataIndex:"icon",align:"center",width:"7%",scopedSlots:{customRender:"icon"}},{title:"出厂时间",dataIndex:"productTime",align:"center",width:"18%",scopedSlots:{customRender:"productTime"},sorter:function(e,t){return e.productTime>t.productTime}},{title:"状态",dataIndex:"status",align:"center",width:"12%",filters:[{text:"全新",value:"0"},{text:"报废",value:"1"}],onFilter:function(e,t){return 0===t.status.indexOf(e)},scopedSlots:{customRender:"status"}},{title:"型号编号",dataIndex:"model",align:"center",width:"12%",scopedSlots:{customRender:"model"}},{title:"价格",dataIndex:"price",align:"center",width:"8%",scopedSlots:{customRender:"price"},sorter:function(e,t){return e.price-t.price}},{title:"所在仓库",dataIndex:"warehouse",align:"center",width:"14%",scopedSlots:{customRender:"storehouse"},filters:[],onFilter:function(e,t){return 0===t.warehouse.indexOf(e)}}],T=[],k=[],j={inject:["reload"],name:"EquipPreview",components:{ACol:x["b"],PageView:f["c"]},data:function(){return this.cacheData=T.map(function(e){return Object(u["a"])({},e)}),{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:15}},equipmentData:{id:"",name:"",productTime:"",status:"",model:"",price:"",count:"",warehouse:""},allWarehouse:[],allEquipType:[],visible:!1,visible2:!1,src:"",eData:T,columns:C,eDataShow:k,inputID:"",inputTime:"",advanced:!1,form:this.$form.createForm(this),showAddForm:!1,newFormCount:0,newFormWarehouse:""}},computed:{emptyInput:function(){return""===this.equipmentData.id&&""===this.equipmentData.name&&""===this.equipmentData.model&&""===this.equipmentData.price&&""===this.equipmentData.count&&""===this.equipmentData.warehouse}},methods:{moment:q.a,onClickClearSelect:function(){this.equipmentData.id="",this.equipmentData.name="",this.equipmentData.model="",this.equipmentData.price="",this.equipmentData.count="",this.equipmentData.warehouse=""},onClickSubmit:function(){this.onClickClearSelect()},handleChange:function(e,t,a){var n=Object(c["a"])(this.eData),r=n.filter(function(e){return t===e.key})[0];r&&(r[a]=e,this.eData=n)},edit:function(e){var t=Object(c["a"])(this.eData),a=t.filter(function(t){return e===t.key})[0];a&&(a.editable=!0,this.eData=t)},save:function(e){var t=Object(c["a"])(this.eData),a=t.filter(function(t){return e===t.key})[0];a&&(delete a.editable,this.eData=t,this.cacheData=t.map(function(e){return Object(u["a"])({},e)}))},cancel:function(e){var t=Object(c["a"])(this.eData),a=t.filter(function(t){return e===t.key})[0];a&&(l()(a,this.cacheData.filter(function(t){return e===t.key})[0]),delete a.editable,this.eData=t)},toggleAdvanced:function(){this.advanced=!this.advanced},addEquipment:function(){this.showAddForm=!0},handleSubmit:function(e){var t=this,a=this.$createElement;e.preventDefault(),this.form.validateFields(function(e,n){e||(n["productTime"]=n["productTime"].format("YYYY.MM.DD"),Object(p["a"])(n).then(function(e){t.eData=Object(c["a"])(e.data),t.eDataShow=t.eData,t.$notification.open({message:"添加成功",description:"请继续您的操作",icon:a("a-icon",{attrs:{type:"exclamation-circle"},style:"color: blue"})})}).catch(function(e){t.$notification.open({message:"添加失败",description:"请查看控制台信息",icon:a("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #108ee9"})}),console.log(e)}))}),this.showAddForm=!1},cancelAddForm:function(){this.showAddForm=!1},showImg:function(e){this.visible=!0,this.src=e},handleHide:function(){this.visible=!1}},filters:{statusFilter:function(e){return S[e].text},statusTypeFilter:function(e){return S[e].status}},watch:{inputID:function(e){if(""==e)this.eDataShow=this.eData;else{var t={keys:["id"],threshold:.1},a=new v.a(this.eData,t);this.eDataShow=a.search(e)}},inputTime:function(e){if(""==e)this.eDataShow=this.eData;else{var t={keys:["productTime"],threshold:.1},a=new v.a(this.eData,t);this.eDataShow=a.search(e)}}},mounted:function(){var e=this;Object(p["c"])().then(function(t){e.eData=Object(c["a"])(t.data),e.eDataShow=e.eData}),Object(h["e"])().then(function(t){e.allWarehouse=Object(c["a"])(t.data),e.columns[7].filters=[];var a=!0,n=!1,r=void 0;try{for(var i,o=s()(e.allWarehouse);!(a=(i=o.next()).done);a=!0){var l=i.value,u={text:l,value:l};e.columns[7].filters.push(u)}}catch(d){n=!0,r=d}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}),Object(p["b"])().then(function(t){e.allEquipType=Object(c["a"])(t.data)})}},O=j,F=(a("4161"),a("2877")),_=Object(F["a"])(O,n,r,!1,null,"2ba2affc",null);t["default"]=_.exports},c684:function(e,t,a){},f564:function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"e",function(){return s}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return l}),a.d(t,"b",function(){return c});var n=a("b775"),r={equipmentUsing:"/equipment/using",equipmentDetail:"/equipment/detail",equipmentStored:"/equipment/stored",equipmentAllType:"/equipment/allType"};function i(){return Object(n["b"])({url:r.equipmentStored,method:"get"})}function s(e){return Object(n["b"])({url:r.equipmentDetail,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(n["b"])({url:r.equipmentStored,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(){return Object(n["b"])({url:r.equipmentUsing,method:"get"})}function c(){return Object(n["b"])({url:r.equipmentAllType,method:"get"})}}}]);